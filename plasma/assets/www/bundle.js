/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={677(e,t,n){n.d(t,{secp256k1:()=>Fe});var r=n(442),o=n(531);class s extends o.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,o.sd)(e);const n=(0,o.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),(0,o.uH)(s)}update(e){return(0,o.CC)(this),this.iHash.update(e),this}digestInto(e){(0,o.CC)(this),(0,o.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:s,outputLen:i}=this;return e.finished=r,e.destroyed=o,e.blockLen=s,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(e,t,n)=>new s(e,t).update(n).digest();i.create=(e,t)=>new s(e,t);const a=BigInt(0),c=BigInt(1);function u(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function d(e){if(!u(e))throw new Error("Uint8Array expected")}function l(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function h(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function f(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?a:BigInt("0x"+e)}const p="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,m=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function g(e){if(d(e),p)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=m[e[n]];return t}function y(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function b(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(p)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=y(e.charCodeAt(o)),s=y(e.charCodeAt(o+1));if(void 0===n||void 0===s){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+s}return r}function w(e){return f(g(e))}function v(e){return d(e),f(g(Uint8Array.from(e).reverse()))}function x(e,t){return b(e.toString(16).padStart(2*t,"0"))}function P(e,t){return x(e,t).reverse()}function E(e,t,n){let r;if("string"==typeof t)try{r=b(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!u(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}function I(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];d(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}const B=e=>"bigint"==typeof e&&a<=e;function T(e,t,n){return B(e)&&B(t)&&B(n)&&t<=e&&e<n}function F(e,t,n,r){if(!T(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const A=e=>(c<<BigInt(e))-c,$=e=>new Uint8Array(e),z=e=>Uint8Array.from(e),O={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||u(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function k(e,t,n={}){const r=(t,n,r)=>{const o=O[n];if("function"!=typeof o)throw new Error("invalid validator function");const s=e[t];if(!(r&&void 0===s||o(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+s)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function N(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(void 0!==o)return o;const s=e(n,...r);return t.set(n,s),s}}const S=BigInt(0),R=BigInt(1),C=BigInt(2),G=BigInt(3),M=BigInt(4),j=BigInt(5),L=BigInt(8);function q(e,t){const n=e%t;return n>=S?n:t+n}function U(e,t,n){let r=e;for(;t-- >S;)r*=r,r%=n;return r}function H(e,t){if(e===S)throw new Error("invert: expected non-zero number");if(t<=S)throw new Error("invert: expected positive modulus, got "+t);let n=q(e,t),r=t,o=S,s=R,i=R,a=S;for(;n!==S;){const e=r/n,t=r%n,c=o-i*e,u=s-a*e;r=n,n=t,o=i,s=a,i=c,a=u}if(r!==R)throw new Error("invert: does not exist");return q(o,t)}function D(e,t){const n=(e.ORDER+R)/M,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function _(e,t){const n=(e.ORDER-j)/L,r=e.mul(t,C),o=e.pow(r,n),s=e.mul(t,o),i=e.mul(e.mul(s,C),o),a=e.mul(s,e.sub(i,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}const V=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function W(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((t,n,o)=>e.is0(n)?t:(r[o]=t,e.mul(t,n)),e.ONE),s=e.inv(o);return t.reduceRight((t,n,o)=>e.is0(n)?t:(r[o]=e.mul(t,r[o]),e.mul(t,n)),s),r}function K(e,t){const n=(e.ORDER-R)/C,r=e.pow(t,n),o=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Z(e,t){void 0!==t&&(0,o.Fe)(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Y(e,t,n=!1,r={}){if(e<=S)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:s}=Z(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const a=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:s,MASK:A(o),ZERO:S,ONE:R,create:t=>q(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return S<=t&&t<e},is0:e=>e===S,isOdd:e=>(e&R)===R,neg:t=>q(-t,e),eql:(e,t)=>e===t,sqr:t=>q(t*t,e),add:(t,n)=>q(t+n,e),sub:(t,n)=>q(t-n,e),mul:(t,n)=>q(t*n,e),pow:(e,t)=>function(e,t,n){if(n<S)throw new Error("invalid exponent, negatives unsupported");if(n===S)return e.ONE;if(n===R)return t;let r=e.ONE,o=t;for(;n>S;)n&R&&(r=e.mul(r,o)),o=e.sqr(o),n>>=R;return r}(a,e,t),div:(t,n)=>q(t*H(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>H(t,e),sqrt:r.sqrt||(t=>{return i||(i=(n=e)%M===G?D:n%L===j?_:function(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-R,n=0;for(;t%C===S;)t/=C,n++;let r=C;const o=Y(e);for(;1===K(o,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return D;let s=o.pow(r,t);const i=(t+R)/C;return function(e,r){if(e.is0(r))return r;if(1!==K(e,r))throw new Error("Cannot find square root");let o=n,a=e.mul(e.ONE,s),c=e.pow(r,t),u=e.pow(r,i);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,n=e.sqr(c);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===o)throw new Error("Cannot find square root");const r=R<<BigInt(o-t-1),s=e.pow(a,r);o=t,a=e.sqr(s),c=e.mul(c,a),u=e.mul(u,s)}return u}}(n)),i(a,t);var n}),toBytes:e=>n?P(e,s):x(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?v(e):w(e)},invertBatch:e=>W(a,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(a)}function J(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function X(e){const t=J(e);return t+Math.ceil(t/2)}const Q=BigInt(0),ee=BigInt(1);function te(e,t){const n=t.negate();return e?n:t}function ne(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function re(e,t){ne(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:A(e),maxNumber:n,shiftBy:BigInt(e)}}function oe(e,t,n){const{windowSize:r,mask:o,maxNumber:s,shiftBy:i}=n;let a=Number(e&o),c=e>>i;a>r&&(a-=s,c+=ee);const u=t*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}const se=new WeakMap,ie=new WeakMap;function ae(e){return ie.get(e)||1}function ce(e,t,n,r){(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})})(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);const o=n.length,s=r.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,u=function(e){let t;for(t=0;e>a;e>>=c,t+=1);return t}(BigInt(o));let d=1;u>12?d=u-3:u>4?d=u-2:u>0&&(d=2);const l=A(d),h=new Array(Number(l)+1).fill(i);let f=i;for(let e=Math.floor((t.BITS-1)/d)*d;e>=0;e-=d){h.fill(i);for(let t=0;t<s;t++){const o=r[t],s=Number(o>>BigInt(e)&l);h[s]=h[s].add(n[t])}let t=i;for(let e=h.length-1,n=i;e>0;e--)n=n.add(h[e]),t=t.add(n);if(f=f.add(t),0!==e)for(let e=0;e<d;e++)f=f.double()}return f}function ue(e){return k(e.Fp,V.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),k(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Z(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function de(e){void 0!==e.lowS&&l("lowS",e.lowS),void 0!==e.prehash&&l("prehash",e.prehash)}class le extends Error{constructor(e=""){super(e)}}const he={Err:le,_tlv:{encode:(e,t)=>{const{Err:n}=he;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=h(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?h(o.length/2|128):"";return h(e)+s+o+t},decode(e,t){const{Err:n}=he;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++];let s=0;if(128&o){const e=127&o;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const i=t.subarray(r,r+e);if(i.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===i[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of i)s=s<<8|e;if(r+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=o;const i=t.subarray(r,r+s);if(i.length!==s)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=he;if(e<pe)throw new t("integer: negative integers are not allowed");let n=h(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=he;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return w(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=he,o=E("signature",e),{v:s,l:i}=r.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=he,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}};function fe(e,t){return g(x(e,t))}const pe=BigInt(0),me=BigInt(1),ge=(BigInt(2),BigInt(3)),ye=BigInt(4);function be(e){const t=function(e){const t=ue(e);return k(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r,nByteLength:o,nBitLength:s}=t,i=n.BYTES+1,a=2*n.BYTES+1;function c(e){return q(e,r)}function d(e){return H(e,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:f,weierstrassEquation:p,isWithinCurveOrder:m}=function(e){const t=function(e){const t=ue(e);k(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:n}=t,r=Y(t.n,t.nBitLength),o=t.toBytes||((e,t,r)=>{const o=t.toAffine();return I(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:r,b:o}=t,s=n.sqr(e),i=n.mul(s,e);return n.add(n.add(i,n.mul(e,r)),o)}function a(e,t){const r=n.sqr(t),o=i(e);return n.eql(r,o)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,ge),ye),d=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,d)))throw new Error("bad curve params: a or b");function h(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(u(e)&&(e=g(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let i;try{i="bigint"==typeof e?e:w(E("private key",e,r))}catch(t){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return o&&(i=q(i,s)),F("private key",i,me,s),i}function f(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}const p=N((e,t)=>{const{px:r,py:o,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:o};const i=e.is0();null==t&&(t=i?n.ONE:n.inv(s));const a=n.mul(r,t),c=n.mul(o,t),u=n.mul(s,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),m=N(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=e.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not FE");if(!a(r,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(e,t,r){if(null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?y.ZERO:new y(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=W(n,e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(s(E("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(h(e))}static msm(e,t){return ce(y,r,e,t)}_setWindowSize(e){x.setWindowSize(this,e)}assertValidity(){m(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){f(e);const{px:t,py:r,pz:o}=this,{px:s,py:i,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(s,o)),u=n.eql(n.mul(r,a),n.mul(i,o));return c&&u}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,ge),{px:s,py:i,pz:a}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,l=n.mul(s,s),h=n.mul(i,i),f=n.mul(a,a),p=n.mul(s,i);return p=n.add(p,p),d=n.mul(s,a),d=n.add(d,d),c=n.mul(e,d),u=n.mul(o,f),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(p,c),d=n.mul(o,d),f=n.mul(e,f),p=n.sub(l,f),p=n.mul(e,p),p=n.add(p,d),d=n.add(l,l),l=n.add(d,l),l=n.add(l,f),l=n.mul(l,p),u=n.add(u,l),f=n.mul(i,a),f=n.add(f,f),l=n.mul(f,p),c=n.sub(c,l),d=n.mul(f,h),d=n.add(d,d),d=n.add(d,d),new y(c,u,d)}add(e){f(e);const{px:r,py:o,pz:s}=this,{px:i,py:a,pz:c}=e;let u=n.ZERO,d=n.ZERO,l=n.ZERO;const h=t.a,p=n.mul(t.b,ge);let m=n.mul(r,i),g=n.mul(o,a),b=n.mul(s,c),w=n.add(r,o),v=n.add(i,a);w=n.mul(w,v),v=n.add(m,g),w=n.sub(w,v),v=n.add(r,s);let x=n.add(i,c);return v=n.mul(v,x),x=n.add(m,b),v=n.sub(v,x),x=n.add(o,s),u=n.add(a,c),x=n.mul(x,u),u=n.add(g,b),x=n.sub(x,u),l=n.mul(h,v),u=n.mul(p,b),l=n.add(u,l),u=n.sub(g,l),l=n.add(g,l),d=n.mul(u,l),g=n.add(m,m),g=n.add(g,m),b=n.mul(h,b),v=n.mul(p,v),g=n.add(g,b),b=n.sub(m,b),b=n.mul(h,b),v=n.add(v,b),m=n.mul(g,v),d=n.add(d,m),m=n.mul(x,v),u=n.mul(w,u),u=n.sub(u,m),m=n.mul(w,g),l=n.mul(x,l),l=n.add(l,m),new y(u,d,l)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return x.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:o}=t;F("scalar",e,pe,o);const s=y.ZERO;if(e===pe)return s;if(this.is0()||e===me)return this;if(!r||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,e,y.normalizeZ);let{k1neg:i,k1:a,k2neg:c,k2:u}=r.splitScalar(e),d=s,l=s,h=this;for(;a>pe||u>pe;)a&me&&(d=d.add(h)),u&me&&(l=l.add(h)),h=h.double(),a>>=me,u>>=me;return i&&(d=d.negate()),c&&(l=l.negate()),l=new y(n.mul(l.px,r.beta),l.py,l.pz),d.add(l)}multiply(e){const{endo:r,n:o}=t;let s,i;if(F("scalar",e,me,o),r){const{k1neg:t,k1:o,k2neg:a,k2:c}=r.splitScalar(e);let{p:u,f:d}=this.wNAF(o),{p:l,f:h}=this.wNAF(c);u=x.constTimeNegate(t,u),l=x.constTimeNegate(a,l),l=new y(n.mul(l.px,r.beta),l.py,l.pz),s=u.add(l),i=d.add(h)}else{const{p:t,f:n}=this.wNAF(e);s=t,i=n}return y.normalizeZ([s,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=y.BASE,o=(e,t)=>t!==pe&&t!==me&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=o(this,t).add(o(e,n));return s.is0()?void 0:s}toAffine(e){return p(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===me)return!0;if(n)return n(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===me?this:n?n(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return l("isCompressed",e),this.assertValidity(),o(y,this,e)}toHex(e=!0){return l("isCompressed",e),g(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);const{endo:b,nBitLength:v}=t,x=(P=y,B=b?Math.ceil(v/2):v,{constTimeNegate:te,hasPrecomputes:e=>1!==ae(e),unsafeLadder(e,t,n=P.ZERO){let r=e;for(;t>Q;)t&ee&&(n=n.add(r)),r=r.double(),t>>=ee;return n},precomputeWindow(e,t){const{windows:n,windowSize:r}=re(t,B),o=[];let s=e,i=s;for(let e=0;e<n;e++){i=s,o.push(i);for(let e=1;e<r;e++)i=i.add(s),o.push(i);s=i.double()}return o},wNAF(e,t,n){let r=P.ZERO,o=P.BASE;const s=re(e,B);for(let e=0;e<s.windows;e++){const{nextN:i,offset:a,isZero:c,isNeg:u,isNegF:d,offsetF:l}=oe(n,e,s);n=i,c?o=o.add(te(d,t[l])):r=r.add(te(u,t[a]))}return{p:r,f:o}},wNAFUnsafe(e,t,n,r=P.ZERO){const o=re(e,B);for(let e=0;e<o.windows&&n!==Q;e++){const{nextN:s,offset:i,isZero:a,isNeg:c}=oe(n,e,o);if(n=s,!a){const e=t[i];r=r.add(c?e.negate():e)}}return r},getPrecomputes(e,t,n){let r=se.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&se.set(t,n(r))),r},wNAFCached(e,t,n){const r=ae(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const o=ae(e);return 1===o?this.unsafeLadder(e,t,r):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),t,r)},setWindowSize(e,t){ne(t,B),ie.set(e,t),se.delete(e)}});var P,B;return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:h,weierstrassEquation:i,isWithinCurveOrder:function(e){return T(e,me,t.n)}}}({...t,toBytes(e,t,r){const o=t.toAffine(),s=n.toBytes(o.x),i=I;return l("isCompressed",r),r?i(Uint8Array.from([t.hasEvenY()?2:3]),s):i(Uint8Array.from([4]),s,n.toBytes(o.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===a&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+a+", got "+t)}{const e=w(o);if(!T(e,me,n.ORDER))throw new Error("Point is not on curve");const t=p(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!=((s&me)===me)&&(s=n.neg(s)),{x:e,y:s}}}});function y(e){return e>r>>me}const B=(e,t,n)=>w(e.slice(t,n));class O{constructor(e,t,n){F("r",e,me,r),F("s",t,me,r),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(e){const t=o;return e=E("compactSignature",e,2*t),new O(B(e,0,t),B(e,t,2*t))}static fromDER(e){const{r:t,s:n}=he.toSig(E("DER",e));return new O(t,n)}assertValidity(){}addRecoveryBit(e){return new O(this.r,this.s,e)}recoverPublicKey(e){const{r,s:o,recovery:s}=this,i=M(E("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const a=2===s||3===s?r+t.n:r;if(a>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&s?"03":"02",l=h.fromHex(u+fe(a,n.BYTES)),f=d(a),p=c(-i*f),m=c(o*f),g=h.BASE.multiplyAndAddUnsafe(l,p,m);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return b(this.toDERHex())}toDERHex(){return he.hexFromSig(this)}toCompactRawBytes(){return b(this.toCompactHex())}toCompactHex(){const e=o;return fe(this.r,e)+fe(this.s,e)}}const S={isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const e=X(t.n);return function(e,t,n=!1){const r=e.length,o=J(t),s=X(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const i=q(n?v(e):w(e),t-R)+R;return n?P(i,o):x(i,o)}(t.randomBytes(e),t.n)},precompute:(e=8,t=h.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function C(e){if("bigint"==typeof e)return!1;if(e instanceof h)return!0;const r=E("key",e).length,s=n.BYTES,i=s+1,a=2*s+1;return t.allowedPrivateKeyLengths||o===i?void 0:r===i||r===a}const G=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=w(e),n=8*e.length-s;return n>0?t>>BigInt(n):t},M=t.bits2int_modN||function(e){return c(G(e))},j=A(s);function L(e){return F("num < 2^"+s,e,pe,j),x(e,o)}const U={lowS:t.lowS,prehash:!1},D={lowS:t.lowS,prehash:!1};return h.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return h.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(!0===C(e))throw new Error("first arg must be private key");if(!1===C(t))throw new Error("second arg must be public key");return h.fromHex(t).multiply(f(e)).toRawBytes(n)},sign:function(e,r,o=U){const{seed:s,k2sig:i}=function(e,r,o=U){if(["recovered","canonical"].some(e=>e in o))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:i}=t;let{lowS:a,prehash:u,extraEntropy:l}=o;null==a&&(a=!0),e=E("msgHash",e),de(o),u&&(e=E("prehashed msgHash",s(e)));const p=M(e),g=f(r),b=[L(g),L(p)];if(null!=l&&!1!==l){const e=!0===l?i(n.BYTES):l;b.push(E("extraEntropy",e))}const w=I(...b),v=p;return{seed:w,k2sig:function(e){const t=G(e);if(!m(t))return;const n=d(t),r=h.BASE.multiply(t).toAffine(),o=c(r.x);if(o===pe)return;const s=c(n*c(v+o*g));if(s===pe)return;let i=(r.x===o?0:2)|Number(r.y&me),u=s;return a&&y(s)&&(u=function(e){return y(e)?c(-e):e}(s),i^=1),new O(o,u,i)}}}(e,r,o),a=t,u=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=$(e),o=$(e),s=0;const i=()=>{r.fill(1),o.fill(0),s=0},a=(...e)=>n(o,r,...e),c=(e=$(0))=>{o=a(z([0]),e),r=a(),0!==e.length&&(o=a(z([1]),e),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return I(...n)};return(e,t)=>{let n;for(i(),c(e);!(n=t(u()));)c();return i(),n}}(a.hash.outputLen,a.nByteLength,a.hmac);return u(s,i)},verify:function(e,n,r,o=D){const s=e;n=E("msgHash",n),r=E("publicKey",r);const{lowS:i,prehash:a,format:l}=o;if(de(o),"strict"in o)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const f="string"==typeof s||u(s),p=!f&&!l&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!f&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let m,g;try{if(p&&(m=new O(s.r,s.s)),f){try{"compact"!==l&&(m=O.fromDER(s))}catch(e){if(!(e instanceof he.Err))throw e}m||"der"===l||(m=O.fromCompact(s))}g=h.fromHex(r)}catch(e){return!1}if(!m)return!1;if(i&&m.hasHighS())return!1;a&&(n=t.hash(n));const{r:y,s:b}=m,w=M(n),v=d(b),x=c(w*v),P=c(y*v),I=h.BASE.multiplyAndAddUnsafe(g,x,P)?.toAffine();return!!I&&c(I.x)===y},ProjectivePoint:h,Signature:O,utils:S}}function we(e){return{hash:e,hmac:(t,...n)=>i(e,t,(0,o.Id)(...n)),randomBytes:o.po}}const ve=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pe=BigInt(0),Ee=BigInt(1),Ie=BigInt(2),Be=(e,t)=>(e+t/Ie)/t;const Te=Y(ve,void 0,void 0,{sqrt:function(e){const t=ve,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=U(d,n,t)*d%t,h=U(l,n,t)*d%t,f=U(h,Ie,t)*u%t,p=U(f,o,t)*f%t,m=U(p,s,t)*p%t,g=U(m,a,t)*m%t,y=U(g,c,t)*g%t,b=U(y,a,t)*m%t,w=U(b,n,t)*d%t,v=U(w,i,t)*p%t,x=U(v,r,t)*u%t,P=U(x,Ie,t);if(!Te.eql(Te.sqr(P),e))throw new Error("Cannot find square root");return P}}),Fe=function(e,t){const n=t=>be({...e,...we(t)});return{...n(t),create:n}}({a:Pe,b:BigInt(7),Fp:Te,n:xe,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=xe,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ee*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,i=BigInt("0x100000000000000000000000000000000"),a=Be(s*e,t),c=Be(-r*e,t);let u=q(e-a*n-c*o,t),d=q(-a*r-c*s,t);const l=u>i,h=d>i;if(l&&(u=t-u),h&&(d=t-d),u>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:h,k2:d}}}},r.sc)},271(e,t,n){n.d(t,{B4:()=>p,CQ:()=>x,CW:()=>v,Ei:()=>h,F8:()=>P,P5:()=>f,TH:()=>E,Vl:()=>b,Vr:()=>w,WM:()=>m,WQ:()=>y,im:()=>g,jm:()=>c,lD:()=>i,qh:()=>l,rE:()=>u,ry:()=>d,xn:()=>a});const r=BigInt(2**32-1),o=BigInt(32);function s(e,t=!1){return t?{h:Number(e&r),l:Number(e>>o&r)}:{h:0|Number(e>>o&r),l:0|Number(e&r)}}function i(e,t=!1){const n=e.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:a}=s(e[i],t);[r[i],o[i]]=[n,a]}return[r,o]}const a=(e,t,n)=>e>>>n,c=(e,t,n)=>e<<32-n|t>>>n,u=(e,t,n)=>e>>>n|t<<32-n,d=(e,t,n)=>e<<32-n|t>>>n,l=(e,t,n)=>e<<64-n|t>>>n-32,h=(e,t,n)=>e>>>n-32|t<<64-n,f=(e,t,n)=>e<<n|t>>>32-n,p=(e,t,n)=>t<<n|e>>>32-n,m=(e,t,n)=>t<<n-32|e>>>64-n,g=(e,t,n)=>e<<n-32|t>>>64-n;function y(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}const b=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),w=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,v=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),x=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,P=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0),E=(e,t,n,r,o,s)=>t+n+r+o+s+(e/2**32|0)|0},442(e,t,n){n.d(t,{sc:()=>l});var r=n(531);function o(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}class i extends r.Vw{constructor(e,t,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(e),this.view=(0,r.O8)(this.buffer)}update(e){(0,r.CC)(this),e=(0,r.ZJ)(e),(0,r.DO)(e);const{view:t,buffer:n,blockLen:o}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(o-this.pos,s-i);if(a===o){const t=(0,r.O8)(e);for(;o<=s-i;i+=o)this.process(t,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.CC)(this),(0,r.Ht)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:o,isLE:s}=this;let{pos:i}=this;t[i++]=128,(0,r.uH)(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let e=i;e<o;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}(n,o-8,BigInt(8*this.length),s),this.process(n,0);const a=(0,r.O8)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)a.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:s,pos:i}=this;return e.destroyed=s,e.finished=o,e.length=r,e.pos=i,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const a=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);n(271);const c=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),u=new Uint32Array(64);class d extends i{constructor(e=32){super(64,e,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:s,G:i,H:a}=this;return[e,t,n,r,o,s,i,a]}set(e,t,n,r,o,s,i,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|s,this.G=0|i,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)u[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=u[e-15],n=u[e-2],o=(0,r.Ow)(t,7)^(0,r.Ow)(t,18)^t>>>3,s=(0,r.Ow)(n,17)^(0,r.Ow)(n,19)^n>>>10;u[e]=s+u[e-7]+o+u[e-16]|0}let{A:n,B:i,C:a,D:d,E:l,F:h,G:f,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,r.Ow)(l,6)^(0,r.Ow)(l,11)^(0,r.Ow)(l,25))+o(l,h,f)+c[e]+u[e]|0,m=((0,r.Ow)(n,2)^(0,r.Ow)(n,13)^(0,r.Ow)(n,22))+s(n,i,a)|0;p=f,f=h,h=l,l=d+t|0,d=a,a=i,i=n,n=t+m|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,d=d+this.D|0,l=l+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(n,i,a,d,l,h,f,p)}roundClean(){(0,r.uH)(u)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.uH)(this.buffer)}}const l=(0,r.qj)(()=>new d)},531(e,t,n){n.d(t,{Vw:()=>y,DO:()=>s,CC:()=>a,sd:()=>i,Fe:()=>o,Ht:()=>c,uH:()=>d,Id:()=>g,qj:()=>b,O8:()=>l,po:()=>w,Ow:()=>h,fd:()=>p,ZJ:()=>m,DH:()=>u});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function s(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");o(e.outputLen),o(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function u(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function d(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function l(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function h(e,t){return e<<32-t|e>>>t}function f(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const p=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=f(e[t]);return e};function m(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e)),s(e),e}function g(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];s(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}class y{}function b(e){const t=t=>e().update(m(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function w(e=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(e));if(r&&"function"==typeof r.randomBytes)return Uint8Array.from(r.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}function r(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);let o,s=256;function i(e=11){if(!o||s+e>512){o="",s=0;for(let e=0;e<256;e++)o+=(256+256*Math.random()|0).toString(16).substring(1)}return o.substring(s,s+++e)}const a={gwei:9,wei:18},c={ether:-9,wei:9};function u(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[o,s]=[n.slice(0,n.length-t),n.slice(n.length-t)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${o||"0"}${s?`.${s}`:""}`}function d(e,t="wei"){return u(e,c[t])}const l="2.45.1";let h=({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,f=`viem@${l}`;class p extends Error{constructor(e,t={}){const n=t.cause instanceof p?t.cause.details:t.cause?.message?t.cause.message:t.details,r=t.cause instanceof p&&t.cause.docsPath||t.docsPath,o=h?.({...t,docsPath:r});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...n?[`Details: ${n}`]:[],...f?[`Version: ${f}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=r,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=l}walk(e){return m(this,e)}}function m(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?m(e.cause,t):t?null:e}class g extends p{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class y extends p{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class b extends p{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${d(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class w extends p{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(w,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class v extends p{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${d(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(v,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class x extends p{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${d(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(x,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class P extends p{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(P,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class E extends p{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(E,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class I extends p{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(I,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class B extends p{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(B,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class T extends p{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(T,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class F extends p{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(F,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class A extends p{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(A,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class $ extends p{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${d(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${d(n)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty($,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class z extends p{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function O(e,t="wei"){return u(e,a[t])}function k(e){const t=Object.entries(e).map(([e,t])=>void 0===t||!1===t?null:[e,t]).filter(Boolean),n=t.reduce((e,[t])=>Math.max(e,t.length),0);return t.map(([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`).join("\n")}class N extends p{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class S extends p{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",k(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class R extends p{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class C extends p{constructor(e,{account:t,docsPath:n,chain:r,data:o,gas:s,gasPrice:i,maxFeePerGas:a,maxPriorityFeePerGas:c,nonce:u,to:l,value:h}){const f=k({chain:r&&`${r?.name} (id: ${r?.id})`,from:t?.address,to:l,value:void 0!==h&&`${O(h)} ${r?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:s,gasPrice:void 0!==i&&`${d(i)} gwei`,maxFeePerGas:void 0!==a&&`${d(a)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${d(c)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class G extends p{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:r,index:o}){let s="Transaction";n&&void 0!==o&&(s=`Transaction at block time "${n}" at index "${o}"`),e&&void 0!==o&&(s=`Transaction at block hash "${e}" at index "${o}"`),t&&void 0!==o&&(s=`Transaction at block number "${t}" at index "${o}"`),r&&(s=`Transaction with hash "${r}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}}class M extends p{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class j extends p{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class L extends p{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}function q(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof p?e.walk(e=>e?.code===w.code):e;return r instanceof p?new w({cause:e,message:r.details}):w.nodeMessage.test(n)?new w({cause:e,message:e.details}):v.nodeMessage.test(n)?new v({cause:e,maxFeePerGas:t?.maxFeePerGas}):x.nodeMessage.test(n)?new x({cause:e,maxFeePerGas:t?.maxFeePerGas}):P.nodeMessage.test(n)?new P({cause:e,nonce:t?.nonce}):E.nodeMessage.test(n)?new E({cause:e,nonce:t?.nonce}):I.nodeMessage.test(n)?new I({cause:e,nonce:t?.nonce}):B.nodeMessage.test(n)?new B({cause:e}):T.nodeMessage.test(n)?new T({cause:e,gas:t?.gas}):F.nodeMessage.test(n)?new F({cause:e,gas:t?.gas}):A.nodeMessage.test(n)?new A({cause:e}):$.nodeMessage.test(n)?new $({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new z({cause:e})}function U(e,{docsPath:t,...n}){const r=(()=>{const t=q(e,n);return t instanceof z?e:t})();return new C(r,{docsPath:t,...n})}function H(e,{format:t}){if(!t)return{};const n={};return function t(r){const o=Object.keys(r);for(const s of o)s in e&&(n[s]=e[s]),r[s]&&"object"==typeof r[s]&&!Array.isArray(r[s])&&t(r[s])}(t(e||{})),n}class D extends p{constructor({max:e,min:t,signed:n,size:r,value:o}){super(`Number "${o}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class _ extends p{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class V extends p{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function W(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function K(e){return W(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function Z(e,{size:t}){if(K(e)>t)throw new V({givenSize:K(e),maxSize:t})}function Y(e,t={}){const{signed:n}=t;t.size&&Z(e,{size:t.size});const r=BigInt(e);if(!n)return r;const o=(e.length-2)/2;return r<=(1n<<8n*BigInt(o)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*o,"f")}`)-1n}function J(e,t={}){const n=Y(e,t),r=Number(n);if(!Number.isSafeInteger(r))throw new D({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:t.signed,size:t.size,value:`${n}n`});return r}const X={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Q(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?J(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?J(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?X[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=e.authorizationList.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof n.v){if(0n===n.v||27n===n.v)return 0;if(1n===n.v||28n===n.v)return 1;if(n.v>=35n)return n.v%2n==0n?1:0}})(),"legacy"===n.type&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),"eip2930"===n.type&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),"eip1559"===n.type&&delete n.maxFeePerBlobGas,n}class ee extends p{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class te extends p{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class ne extends p{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function re(e,{dir:t,size:n=32}={}){return"string"==typeof e?oe(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new te({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let o=0;o<n;o++){const s="right"===t;r[s?o:n-o-1]=e[s?o:e.length-o-1]}return r}(e,{dir:t,size:n})}function oe(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new te({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}const se=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ie(e,t={}){return"number"==typeof e||"bigint"==typeof e?ue(e,t):"string"==typeof e?le(e,t):"boolean"==typeof e?ae(e,t):ce(e,t)}function ae(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(Z(n,{size:t.size}),re(n,{size:t.size})):n}function ce(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=se[e[t]];const r=`0x${n}`;return"number"==typeof t.size?(Z(r,{size:t.size}),re(r,{dir:"right",size:t.size})):r}function ue(e,t={}){const{signed:n,size:r}=t,o=BigInt(e);let s;r?s=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const i="bigint"==typeof s&&n?-s-1n:0;if(s&&o>s||o<i){const t="bigint"==typeof e?"n":"";throw new D({max:s?`${s}${t}`:void 0,min:`${i}${t}`,signed:n,size:r,value:`${e}${t}`})}const a=`0x${(n&&o<0?(1n<<BigInt(8*r))+BigInt(o):o).toString(16)}`;return r?re(a,{size:r}):a}const de=new TextEncoder;function le(e,t={}){return ce(de.encode(e),t)}const he={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function fe(e,t){const n={};return void 0!==e.authorizationList&&(n.authorizationList=e.authorizationList.map(e=>({address:e.address,r:e.r?ue(BigInt(e.r)):e.r,s:e.s?ue(BigInt(e.s)):e.s,chainId:ue(e.chainId),nonce:ue(e.nonce),...void 0!==e.yParity?{yParity:ue(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:ue(e.v)}:{}}))),void 0!==e.accessList&&(n.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?n.blobs=e.blobs.map(e=>ce(e)):n.blobs=e.blobs),void 0!==e.data&&(n.data=e.data),e.account&&(n.from=e.account.address),void 0!==e.from&&(n.from=e.from),void 0!==e.gas&&(n.gas=ue(e.gas)),void 0!==e.gasPrice&&(n.gasPrice=ue(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(n.maxFeePerBlobGas=ue(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(n.maxFeePerGas=ue(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=ue(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(n.nonce=ue(e.nonce)),void 0!==e.to&&(n.to=e.to),void 0!==e.type&&(n.type=he[e.type]),void 0!==e.value&&(n.value=ue(e.value)),n}function pe(e,t,n){const r=e[t.name];if("function"==typeof r)return r;const o=e[n];return"function"==typeof o?o:n=>t(e,n)}const me=2n**256n-1n;class ge extends p{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class ye extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const be=new TextEncoder;function we(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return Pe(ue(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),"number"==typeof t.size?(Z(n,{size:t.size}),re(n,{size:t.size})):n}(e,t):W(e)?Pe(e,t):Ee(e,t)}const ve={zero:48,nine:57,A:65,F:70,a:97,f:102};function xe(e){return e>=ve.zero&&e<=ve.nine?e-ve.zero:e>=ve.A&&e<=ve.F?e-(ve.A-10):e>=ve.a&&e<=ve.f?e-(ve.a-10):void 0}function Pe(e,t={}){let n=e;t.size&&(Z(n,{size:t.size}),n=re(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,s=new Uint8Array(o);for(let e=0,t=0;e<o;e++){const n=xe(r.charCodeAt(t++)),o=xe(r.charCodeAt(t++));if(void 0===n||void 0===o)throw new p(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);s[e]=16*n+o}return s}function Ee(e,t={}){const n=be.encode(e);return"number"==typeof t.size?(Z(n,{size:t.size}),re(n,{dir:"right",size:t.size})):n}var Ie=n(271),Be=n(531);const Te=BigInt(0),Fe=BigInt(1),Ae=BigInt(2),$e=BigInt(7),ze=BigInt(256),Oe=BigInt(113),ke=[],Ne=[],Se=[];for(let e=0,t=Fe,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],ke.push(2*(5*r+n)),Ne.push((e+1)*(e+2)/2%64);let o=Te;for(let e=0;e<7;e++)t=(t<<Fe^(t>>$e)*Oe)%ze,t&Ae&&(o^=Fe<<(Fe<<BigInt(e))-Fe);Se.push(o)}const Re=(0,Ie.lD)(Se,!0),Ce=Re[0],Ge=Re[1],Me=(e,t,n)=>n>32?(0,Ie.WM)(e,t,n):(0,Ie.P5)(e,t,n),je=(e,t,n)=>n>32?(0,Ie.im)(e,t,n):(0,Ie.B4)(e,t,n);class Le extends Be.Vw{constructor(e,t,n,r=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=o,(0,Be.Fe)(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,Be.DH)(this.state)}clone(){return this._cloneInto()}keccak(){(0,Be.fd)(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,o=(t+2)%10,s=n[o],i=n[o+1],a=Me(s,i,1)^n[r],c=je(s,i,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],o=e[3];for(let n=0;n<24;n++){const r=Ne[n],s=Me(t,o,r),i=je(t,o,r),a=ke[n];t=e[a],o=e[a+1],e[a]=s,e[a+1]=i}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=Ce[r],e[1]^=Ge[r]}(0,Be.uH)(n)}(this.state32,this.rounds),(0,Be.fd)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Be.CC)(this),e=(0,Be.ZJ)(e),(0,Be.DO)(e);const{blockLen:t,state:n}=this,r=e.length;for(let o=0;o<r;){const s=Math.min(t-this.pos,r-o);for(let t=0;t<s;t++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,Be.CC)(this,!1),(0,Be.DO)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,o=e.length;r<o;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,o-r);e.set(t.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Be.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Be.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,Be.uH)(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:o,enableXOF:s}=this;return e||(e=new Le(t,n,r,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=r,e.enableXOF=s,e.destroyed=this.destroyed,e}}const qe=(()=>{return e=1,t=136,n=32,(0,Be.qj)(()=>new Le(t,e,n));var e,t,n})();function Ue(e,t){const n=t||"hex",r=qe(W(e,{strict:!1})?we(e):e);return"bytes"===n?r:ie(r)}const He=new ye(8192);function De(e,t){if(He.has(`${e}.${t}`))return He.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=Ue(Ee(n),"bytes"),o=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&o[e]&&(o[e]=o[e].toUpperCase()),(15&r[e>>1])>=8&&o[e+1]&&(o[e+1]=o[e+1].toUpperCase());const s=`0x${o.join("")}`;return He.set(`${e}.${t}`,s),s}const _e=/^0x[a-fA-F0-9]{40}$/,Ve=new ye(8192);function We(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ve.has(r))return Ve.get(r);const o=!(!_e.test(e)||e.toLowerCase()!==e&&n&&De(e)!==e);return Ve.set(r,o),o}function Ke(e){const{account:t,maxFeePerGas:n,maxPriorityFeePerGas:o,to:s}=e,i=t?r(t):void 0;if(i&&!We(i.address))throw new ge({address:i.address});if(s&&!We(s))throw new ge({address:s});if(n&&n>me)throw new v({maxFeePerGas:n});if(o&&n&&o>n)throw new $({maxFeePerGas:n,maxPriorityFeePerGas:o})}class Ze extends p{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}function Ye(e,t){const n=(e.transactions??[]).map(e=>"string"==typeof e?e:Q(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Je(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:o}={}){const s=o??!1,i=void 0!==n?ue(n):void 0;let a=null;if(a=t?await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[i||r,s]},{dedupe:Boolean(i)}),!a)throw new Ze({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Ye)(a,"getBlock")}async function Xe(e){return J(await e.request({method:"eth_chainId"},{dedupe:!0}))}async function Qe(e,t){const{account:n=e.account,accessList:o,authorizationList:s,chain:i=e.chain,blobVersionedHashes:a,blobs:c,data:u,gas:d,gasPrice:l,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,nonceManager:y,to:b,type:w,value:v,...x}=t,P=await(async()=>{if(!n)return m;if(!y)return m;if(void 0!==m)return m;const t=r(n),o=i?i.id:await pe(e,Xe,"getChainId")({});return await y.consume({address:t.address,chainId:o,client:e})})();Ke(t);const E=i?.formatters?.transactionRequest?.format,I=(E||fe)({...H(x,{format:E}),account:n?r(n):void 0,accessList:o,authorizationList:s,blobs:c,blobVersionedHashes:a,data:u,gas:d,gasPrice:l,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:P,to:b,type:w,value:v},"fillTransaction");try{const n=await e.request({method:"eth_fillTransaction",params:[I]}),r=(i?.formatters?.transaction?.format||Q)(n.tx);delete r.blockHash,delete r.blockNumber,delete r.r,delete r.s,delete r.transactionIndex,delete r.v,delete r.yParity,r.data=r.input,r.gas&&(r.gas=t.gas??r.gas),r.gasPrice&&(r.gasPrice=t.gasPrice??r.gasPrice),r.maxFeePerBlobGas&&(r.maxFeePerBlobGas=t.maxFeePerBlobGas??r.maxFeePerBlobGas),r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas??r.maxFeePerGas),r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas??r.maxPriorityFeePerGas),r.nonce&&(r.nonce=t.nonce??r.nonce);const o=await(async()=>{if("function"==typeof i?.fees?.baseFeeMultiplier){const n=await pe(e,Je,"getBlock")({});return i.fees.baseFeeMultiplier({block:n,client:e,request:t})}return i?.fees?.baseFeeMultiplier??1.2})();if(o<1)throw new g;const s=10**(o.toString().split(".")[1]?.length??0),a=e=>e*BigInt(Math.ceil(o*s))/BigInt(s);return r.maxFeePerGas&&!t.maxFeePerGas&&(r.maxFeePerGas=a(r.maxFeePerGas)),r.gasPrice&&!t.gasPrice&&(r.gasPrice=a(r.gasPrice)),{raw:n.raw,transaction:{from:I.from,...r}}}catch(n){throw U(n,{...t,chain:e.chain})}}function et(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new gt(e.type);return`${e.name}(${tt(e.inputs,{includeName:t})})`}function tt(e,{includeName:t=!1}={}){return e?e.map(e=>function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${tt(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t})).join(t?", ":","):""}class nt extends p{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class rt extends p{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ot extends p{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${tt(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class st extends p{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class it extends p{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class at extends p{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${K(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class ct extends p{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class ut extends p{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://4byte.sourcify.dev/?q=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class dt extends p{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class lt extends p{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${et(e.abiItem)}\`, and`,`\`${t.type}\` in \`${et(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class ht extends p{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class ft extends p{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class pt extends p{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}class mt extends p{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class gt extends p{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}function yt(e){return"string"==typeof e[0]?bt(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(e)}function bt(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function wt(e,t,n,{strict:r}={}){return W(e,{strict:!1})?Et(e,t,n,{strict:r}):Pt(e,t,n,{strict:r})}function vt(e,t){if("number"==typeof t&&t>0&&t>K(e)-1)throw new ee({offset:t,position:"start",size:K(e)})}function xt(e,t,n){if("number"==typeof t&&"number"==typeof n&&K(e)!==n-t)throw new ee({offset:n,position:"end",size:K(e)})}function Pt(e,t,n,{strict:r}={}){vt(e,t);const o=e.slice(t,n);return r&&xt(o,t,n),o}function Et(e,t,n,{strict:r}={}){vt(e,t);const o=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;return r&&xt(o,t,n),o}const It=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Bt=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Tt(e,t){if(e.length!==t.length)throw new ct({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Ft({param:e[r],value:t[r]}));return n}({params:e,values:t}),r=At(n);return 0===r.length?"0x":r}function Ft({param:e,value:t}){const n=$t(e.type);if(n){const[r,o]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new mt(e);if(!r&&e.length!==t)throw new it({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let o=!1;const s=[];for(let t=0;t<e.length;t++){const r=Ft({param:n,value:e[t]});r.dynamic&&(o=!0),s.push(r)}if(r||o){const e=At(s);if(r){const t=ue(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?yt([t,e]):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:yt(s.map(({encoded:e})=>e))}}(t,{length:r,param:{...e,type:o}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const r=[];for(let o=0;o<t.components.length;o++){const s=t.components[o],i=Ft({param:s,value:e[Array.isArray(e)?o:s.name]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?At(r):yt(r.map(({encoded:e})=>e))}}(t,{param:e});if("address"===e.type)return function(e){if(!We(e))throw new ge({address:e});return{dynamic:!1,encoded:oe(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new p(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:oe(ae(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const n=e.type.startsWith("int"),[,,r="256"]=Bt.exec(e.type)??[];return function(e,{signed:t,size:n=256}){if("number"==typeof n){const r=2n**(BigInt(n)-(t?1n:0n))-1n,o=t?-r-1n:0n;if(e>r||e<o)throw new D({max:r.toString(),min:o.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:ue(e,{size:32,signed:t})}}(t,{signed:n,size:Number(r)})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=K(e);if(!n){let t=e;return r%32!=0&&(t=oe(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:yt([oe(ue(r,{size:32})),t])}}if(r!==Number.parseInt(n,10))throw new at({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:oe(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=le(e),n=Math.ceil(K(t)/32),r=[];for(let e=0;e<n;e++)r.push(oe(wt(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:yt([oe(ue(K(t),{size:32})),...r])}}(t);throw new ft(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function At(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:r,encoded:o}=e[n];t+=r?32:K(o)}const n=[],r=[];let o=0;for(let s=0;s<e.length;s++){const{dynamic:i,encoded:a}=e[s];i?(n.push(ue(t+o,{size:32})),r.push(a),o+=K(a)):n.push(a)}return yt([...n,...r])}function $t(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const zt="/docs/contract/encodeDeployData";class Ot extends p{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class kt extends p{constructor({docsPath:e,metaMessages:t,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}function Nt(e){return De(`0x${Ue(`0x${e.substring(4)}`).substring(26)}`)}function St(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}class Rt extends p{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Ct extends p{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Gt extends p{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Mt={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Gt({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Ct({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Rt({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Rt({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function jt(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Mt);return n.bytes=e,n.dataView=new DataView(e.buffer??e,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Lt(e,t="hex"){const n=qt(e),r=jt(new Uint8Array(n.length));return n.encode(r),"hex"===t?ce(r.bytes):r.bytes}function qt(e){return Array.isArray(e)?function(e){const t=e.reduce((e,t)=>e+t.length,0),n=Ut(t);return{length:t<=55?1+t:1+n+t,encode(r){t<=55?r.pushByte(192+t):(r.pushByte(247+n),1===n?r.pushUint8(t):2===n?r.pushUint16(t):3===n?r.pushUint24(t):r.pushUint32(t));for(const{encode:t}of e)t(r)}}}(e.map(e=>qt(e))):function(e){const t="string"==typeof e?Pe(e):e,n=Ut(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+n),1===n?e.pushUint8(t.length):2===n?e.pushUint16(t.length):3===n?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function Ut(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new p("Length is too large.")}function Ht(e){const{chainId:t,nonce:n,to:r}=e,o=e.contractAddress??e.address,s=Ue(bt(["0x05",Lt([t?ue(t):"0x",o,n?ue(n):"0x"])]));return"bytes"===r?Pe(s):s}async function Dt(e){const{authorization:t,signature:r}=e;return async function({hash:e,signature:t}){return Nt(await async function({hash:e,signature:t}){const r=W(e)?e:ie(e),{secp256k1:o}=await Promise.resolve().then(n.bind(n,677));return`0x${(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:n,v:r,yParity:s}=t,i=St(Number(s??r));return new o.Signature(Y(e),Y(n)).addRecoveryBit(i)}const e=W(t)?t:ie(t);if(65!==K(e))throw new Error("invalid signature length");const n=St(J(`0x${e.slice(130)}`));return o.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(n)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}({hash:e,signature:t}))}({hash:Ht(t),signature:r??t})}class _t extends p{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Vt extends p{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n"),{name:"ChainNotFoundError"})}}class Wt extends p{constructor({chainId:e}){super("number"==typeof e?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function Kt({chain:e,currentChainId:t}){if(!e)throw new Vt;if(t!==e.id)throw new _t({chain:e,currentChainId:t})}async function Zt(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Yt(e,t){const{block:n,chain:r=e.chain,request:o,type:s="eip1559"}=t||{},i=await(async()=>"function"==typeof r?.fees?.baseFeeMultiplier?r.fees.baseFeeMultiplier({block:n,client:e,request:o}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new g;const a=10**(i.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(i*a))/BigInt(a),u=n||await pe(e,Je,"getBlock")({});if("function"==typeof r?.fees?.estimateFeesPerGas){const t=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:o,type:s});if(null!==t)return t}if("eip1559"===s){if("bigint"!=typeof u.baseFeePerGas)throw new y;const t="bigint"==typeof o?.maxPriorityFeePerGas?o.maxPriorityFeePerGas:await async function(e,t){const{block:n,chain:r=e.chain,request:o}=t||{};try{const t=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if("function"==typeof t){const r=n||await pe(e,Je,"getBlock")({}),s=await t({block:r,client:e,request:o});if(null===s)throw new Error;return s}return void 0!==t?t:Y(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,r]=await Promise.all([n?Promise.resolve(n):pe(e,Je,"getBlock")({}),pe(e,Zt,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new y;const o=r-t.baseFeePerGas;return o<0n?0n:o}}(e,{block:u,chain:r,request:o}),n=c(u.baseFeePerGas);return{maxFeePerGas:o?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:o?.gasPrice??c(await pe(e,Zt,"getGasPrice")({}))}}class Jt extends p{constructor(e,{account:t,docsPath:n,chain:r,data:o,gas:s,gasPrice:i,maxFeePerGas:a,maxPriorityFeePerGas:c,nonce:u,to:l,value:h}){const f=k({from:t?.address,to:l,value:void 0!==h&&`${O(h)} ${r?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:s,gasPrice:void 0!==i&&`${d(i)} gwei`,maxFeePerGas:void 0!==a&&`${d(a)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${d(c)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Xt extends p{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Qt extends p{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function en(e){if(e&&0!==e.length)return e.reduce((e,{slot:t,value:n})=>{if(66!==t.length)throw new ne({size:t.length,targetSize:66,type:"hex"});if(66!==n.length)throw new ne({size:n.length,targetSize:66,type:"hex"});return e[t]=n,e},{})}function tn(e){const{balance:t,nonce:n,state:r,stateDiff:o,code:s}=e,i={};if(void 0!==s&&(i.code=s),void 0!==t&&(i.balance=ue(t)),void 0!==n&&(i.nonce=ue(n)),void 0!==r&&(i.state=en(r)),void 0!==o){if(i.state)throw new Qt;i.stateDiff=en(o)}return i}async function nn(e,t){const{account:n=e.account,prepare:o=!0}=t,s=n?r(n):void 0,i=Array.isArray(o)?o:"local"!==s?.type?["blobVersionedHashes"]:void 0;try{const n=await(async()=>t.to?t.to:t.authorizationList&&t.authorizationList.length>0?await Dt({authorization:t.authorizationList[0]}).catch(()=>{throw new p("`to` is required. Could not infer from `authorizationList`")}):void 0)(),{accessList:r,authorizationList:a,blobs:c,blobVersionedHashes:u,blockNumber:d,blockTag:l,data:h,gas:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,value:v,stateOverride:x,...P}=o?await En(e,{...t,parameters:i,to:n}):t;if(f&&t.gas!==f)return f;const E=("bigint"==typeof d?ue(d):void 0)||l,I=function(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!We(n,{strict:!1}))throw new ge({address:n});if(t[n])throw new Xt({address:n});t[n]=tn(r)}return t}(x);Ke(t);const B=e.chain?.formatters?.transactionRequest?.format,T=(B||fe)({...H(P,{format:B}),account:s,accessList:r,authorizationList:a,blobs:c,blobVersionedHashes:u,data:h,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:n,value:v},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:I?[T,E??e.experimental_blockTag??"latest",I]:E?[T,E]:[T]}))}catch(n){throw function(e,{docsPath:t,...n}){const r=(()=>{const t=q(e,n);return t instanceof z?e:t})();return new Jt(r,{docsPath:t,...n})}(n,{...t,account:s,chain:e.chain})}}async function rn(e,{address:t,blockTag:n="latest",blockNumber:r}){return J(await e.request({method:"eth_getTransactionCount",params:[t,"bigint"==typeof r?ue(r):n]},{dedupe:Boolean(r)}))}function on(e){const{kzg:t}=e,n=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),r="string"==typeof e.blobs[0]?e.blobs.map(e=>Pe(e)):e.blobs,o=[];for(const e of r)o.push(Uint8Array.from(t.blobToKzgCommitment(e)));return"bytes"===n?o:o.map(e=>ce(e))}function sn(e){const{kzg:t}=e,n=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),r="string"==typeof e.blobs[0]?e.blobs.map(e=>Pe(e)):e.blobs,o="string"==typeof e.commitments[0]?e.commitments.map(e=>Pe(e)):e.commitments,s=[];for(let e=0;e<r.length;e++){const n=r[e],i=o[e];s.push(Uint8Array.from(t.computeBlobKzgProof(n,i)))}return"bytes"===n?s:s.map(e=>ce(e))}const an=n(442).sc;function cn(e){const{commitment:t,version:n=1}=e,r=e.to??("string"==typeof t?"hex":"bytes"),o=function(e){const t=an(W(e,{strict:!1})?we(e):e);return t}(t);return o.set([n],0),"bytes"===r?o:ce(o)}function un(e){const{commitments:t,version:n}=e,r=e.to??("string"==typeof t[0]?"hex":"bytes"),o=[];for(const e of t)o.push(cn({commitment:e,to:r,version:n}));return o}const dn=32,ln=4096,hn=dn*ln,fn=6*hn-1-1*ln*6;class pn extends p{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class mn extends p{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class gn extends p{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}}class yn extends p{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:["Expected: 1",`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}function bn(e){const{data:t,kzg:n,to:r}=e,o=e.blobs??function(e){const t=e.to??("string"==typeof e.data?"hex":"bytes"),n="string"==typeof e.data?Pe(e.data):e.data,r=K(n);if(!r)throw new mn;if(r>fn)throw new pn({maxSize:fn,size:r});const o=[];let s=!0,i=0;for(;s;){const e=jt(new Uint8Array(hn));let t=0;for(;t<ln;){const r=n.slice(i,i+(dn-1));if(e.pushByte(0),e.pushBytes(r),r.length<31){e.pushByte(128),s=!1;break}t++,i+=31}o.push(e)}return"bytes"===t?o.map(e=>e.bytes):o.map(e=>ce(e.bytes))}({data:t,to:r}),s=e.commitments??on({blobs:o,kzg:n,to:r}),i=e.proofs??sn({blobs:o,commitments:s,kzg:n,to:r}),a=[];for(let e=0;e<o.length;e++)a.push({blob:o[e],commitment:s[e],proof:i[e]});return a}function wn(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new S({transaction:e})}const vn=["blobVersionedHashes","chainId","fees","gas","nonce","type"],xn=new Map,Pn=new ye(128);async function En(e,t){let n=t;n.account??=e.account,n.parameters??=vn;const{account:o,chain:s=e.chain,nonceManager:i,parameters:a}=n,c="function"==typeof s?.prepareTransactionRequest?{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]}:Array.isArray(s?.prepareTransactionRequest)?{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}:void 0;let u;async function d(){if(u)return u;if(void 0!==n.chainId)return n.chainId;if(s)return s.id;const t=await pe(e,Xe,"getChainId")({});return u=t,u}const l=o?r(o):o;let h=n.nonce;if(a.includes("nonce")&&void 0===h&&l&&i){const t=await d();h=await i.consume({address:l.address,chainId:t,client:e})}c?.fn&&c.runAt?.includes("beforeFillTransaction")&&(n=await c.fn({...n,chain:s},{phase:"beforeFillTransaction"}),h??=n.nonce);const f=(a.includes("blobVersionedHashes")||a.includes("sidecars"))&&n.kzg&&n.blobs||!1===Pn.get(e.uid)||!["fees","gas"].some(e=>a.includes(e))||!(a.includes("chainId")&&"number"!=typeof n.chainId||a.includes("nonce")&&"number"!=typeof h||a.includes("fees")&&"bigint"!=typeof n.gasPrice&&("bigint"!=typeof n.maxFeePerGas||"bigint"!=typeof n.maxPriorityFeePerGas)||a.includes("gas")&&"bigint"!=typeof n.gas)?n:await pe(e,Qe,"fillTransaction")({...n,nonce:h}).then(t=>{const{chainId:r,from:o,gas:s,gasPrice:i,nonce:a,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,type:l,...h}=t.transaction;return Pn.set(e.uid,!0),{...n,...o?{from:o}:{},...l?{type:l}:{},...void 0!==r?{chainId:r}:{},...void 0!==s?{gas:s}:{},...void 0!==i?{gasPrice:i}:{},...void 0!==a?{nonce:a}:{},...void 0!==c?{maxFeePerBlobGas:c}:{},...void 0!==u?{maxFeePerGas:u}:{},...void 0!==d?{maxPriorityFeePerGas:d}:{},..."nonceKey"in h&&void 0!==h.nonceKey?{nonceKey:h.nonceKey}:{}}}).catch(t=>{const r=t;if("TransactionExecutionError"!==r.name)return n;const o=r.walk?.(e=>{const t=e;return"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name});return o&&Pn.set(e.uid,!1),n});h??=f.nonce,n={...f,...l?{from:l?.address}:{},...h?{nonce:h}:{}};const{blobs:p,gas:m,kzg:g,type:w}=n;let v;async function x(){return v||(v=await pe(e,Je,"getBlock")({blockTag:"latest"}),v)}if(c?.fn&&c.runAt?.includes("beforeFillParameters")&&(n=await c.fn({...n,chain:s},{phase:"beforeFillParameters"})),a.includes("nonce")&&void 0===h&&l&&!i&&(n.nonce=await pe(e,rn,"getTransactionCount")({address:l.address,blockTag:"pending"})),(a.includes("blobVersionedHashes")||a.includes("sidecars"))&&p&&g){const e=on({blobs:p,kzg:g});if(a.includes("blobVersionedHashes")){const t=un({commitments:e,to:"hex"});n.blobVersionedHashes=t}if(a.includes("sidecars")){const t=bn({blobs:p,commitments:e,proofs:sn({blobs:p,commitments:e,kzg:g}),to:"hex"});n.sidecars=t}}if(a.includes("chainId")&&(n.chainId=await d()),(a.includes("fees")||a.includes("type"))&&void 0===w)try{n.type=wn(n)}catch{let t=xn.get(e.uid);if(void 0===t){const n=await x();t="bigint"==typeof n?.baseFeePerGas,xn.set(e.uid,t)}n.type=t?"eip1559":"legacy"}if(a.includes("fees"))if("legacy"!==n.type&&"eip2930"!==n.type){if(void 0===n.maxFeePerGas||void 0===n.maxPriorityFeePerGas){const t=await x(),{maxFeePerGas:r,maxPriorityFeePerGas:o}=await Yt(e,{block:t,chain:s,request:n});if(void 0===n.maxPriorityFeePerGas&&n.maxFeePerGas&&n.maxFeePerGas<o)throw new b({maxPriorityFeePerGas:o});n.maxPriorityFeePerGas=o,n.maxFeePerGas=r}}else{if(void 0!==n.maxFeePerGas||void 0!==n.maxPriorityFeePerGas)throw new y;if(void 0===n.gasPrice){const t=await x(),{gasPrice:r}=await Yt(e,{block:t,chain:s,request:n,type:"legacy"});n.gasPrice=r}}return a.includes("gas")&&void 0===m&&(n.gas=await pe(e,nn,"estimateGas")({...n,account:l,prepare:"local"===l?.type?[]:["blobVersionedHashes"]})),c?.fn&&c.runAt?.includes("afterFillParameters")&&(n=await c.fn({...n,chain:s},{phase:"afterFillParameters"})),Ke(n),delete n.parameters,n}async function In(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Bn=new ye(128);async function Tn(e,t){const{account:n=e.account,assertChainId:o=!0,chain:s=e.chain,accessList:i,authorizationList:a,blobs:c,data:u,dataSuffix:d=("string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value),gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,type:b,value:w,...v}=t;if(void 0===n)throw new Ot({docsPath:"/docs/actions/wallet/sendTransaction"});const x=n?r(n):null;try{Ke(t);const n=await(async()=>t.to?t.to:null!==t.to&&a&&a.length>0?await Dt({authorization:a[0]}).catch(()=>{throw new p("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if("json-rpc"===x?.type||null===x){let t;null!==s&&(t=await pe(e,Xe,"getChainId")({}),o&&Kt({currentChainId:t,chain:s}));const r=e.chain?.formatters?.transactionRequest?.format,p=(r||fe)({...H(v,{format:r}),accessList:i,account:x,authorizationList:a,blobs:c,chainId:t,data:u?yt([u,d??"0x"]):u,gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,to:n,type:b,value:w},"sendTransaction"),P=Bn.get(e.uid),E=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:E,params:[p]},{retryCount:0})}catch(t){if(!1===P)throw t;const n=t;if("InvalidInputRpcError"===n.name||"InvalidParamsRpcError"===n.name||"MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)return await e.request({method:"wallet_sendTransaction",params:[p]},{retryCount:0}).then(t=>(Bn.set(e.uid,!0),t)).catch(t=>{const r=t;if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw Bn.set(e.uid,!1),n;throw r});throw n}}if("local"===x?.type){const t=await pe(e,En,"prepareTransactionRequest")({account:x,accessList:i,authorizationList:a,blobs:c,chain:s,data:u?yt([u,d??"0x"]):u,gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,nonceManager:x.nonceManager,parameters:[...vn,"sidecars"],type:b,value:w,...v,to:n}),r=s?.serializers?.transaction,o=await x.signTransaction(t,{serializer:r});return await pe(e,In,"sendRawTransaction")({serializedTransaction:o})}if("smart"===x?.type)throw new kt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new kt({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(e){if(e instanceof kt)throw e;throw U(e,{...t,account:x,chain:t.chain||void 0})}}function Fn(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,r=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)r++;return n="left"===t?n.slice(r):n.slice(0,n.length-r),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}const An={"0x0":"reverted","0x1":"success"};function $n(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>function(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,blockTimestamp:e.blockTimestamp?BigInt(e.blockTimestamp):null===e.blockTimestamp?null:void 0,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?J(e.transactionIndex):null,status:e.status?An[e.status]:null,type:e.type?X[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const zn=(e,t,n)=>JSON.stringify(e,(e,n)=>{const r="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,r):r},n);class On extends p{constructor({body:e,cause:t,details:n,headers:r,status:o,url:s}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[o&&`Status: ${o}`,`URL: ${s}`,e&&`Request body: ${zn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=o,this.url=s}}class kn extends p{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${n}`,`Request body: ${zn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data,this.url=n}}class Nn extends p{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${zn(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=t}}class Sn extends p{constructor(e,{code:t,docsPath:n,metaMessages:r,name:o,shortMessage:s}){super(s,{cause:e,docsPath:n,metaMessages:r||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof kn?e.code:t??-1}}class Rn extends Sn{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Cn extends Sn{constructor(e){super(e,{code:Cn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Gn extends Sn{constructor(e){super(e,{code:Gn.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Mn extends Sn{constructor(e,{method:t}={}){super(e,{code:Mn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class jn extends Sn{constructor(e){super(e,{code:jn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ln extends Sn{constructor(e){super(e,{code:Ln.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class qn extends Sn{constructor(e){super(e,{code:qn.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Un extends Sn{constructor(e){super(e,{code:Un.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Hn extends Sn{constructor(e){super(e,{code:Hn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Dn extends Sn{constructor(e){super(e,{code:Dn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _n extends Sn{constructor(e,{method:t}={}){super(e,{code:_n.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(_n,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Vn extends Sn{constructor(e){super(e,{code:Vn.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Wn extends Sn{constructor(e){super(e,{code:Wn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Kn extends Rn{constructor(e){super(e,{code:Kn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Zn extends Rn{constructor(e){super(e,{code:Zn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Yn extends Rn{constructor(e,{method:t}={}){super(e,{code:Yn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Jn extends Rn{constructor(e){super(e,{code:Jn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Xn extends Rn{constructor(e){super(e,{code:Xn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Qn extends Rn{constructor(e){super(e,{code:Qn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class er extends Rn{constructor(e){super(e,{code:er.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(er,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class tr extends Rn{constructor(e){super(e,{code:tr.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class nr extends Rn{constructor(e){super(e,{code:nr.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class rr extends Rn{constructor(e){super(e,{code:rr.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(rr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class or extends Rn{constructor(e){super(e,{code:or.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(or,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class sr extends Rn{constructor(e){super(e,{code:sr.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class ir extends Rn{constructor(e){super(e,{code:ir.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ar extends Sn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const cr=/^tuple(?<array>(\[(\d*)\])*)$/;function ur(e){let t=e.type;if(cr.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let r=0;r<n;r++)t+=ur(e.components[r]),r<n-1&&(t+=", ");const r=function(e,t){const n=e.exec(t);return n?.groups}(cr,e.type);return t+=`)${r?.array||""}`,ur({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function dr(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=ur(e[r]),r!==n-1&&(t+=", ");return t}function lr(e){return Ue(we(function(e){let t=!0,n="",r=0,o="",s=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),"("===a&&r++,")"===a&&r--,t)if(0!==r)" "!==a?(o+=a,n+=a):","!==e[i-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===a&&["event","function",""].includes(o))o="";else if(o+=a,")"===a){s=!0;break}}if(!s)throw new p("Unable to normalize signature.");return o}("string"==typeof(t=e)?t:"function"===(n=t).type?`function ${n.name}(${dr(n.inputs)})${n.stateMutability&&"nonpayable"!==n.stateMutability?` ${n.stateMutability}`:""}${n.outputs?.length?` returns (${dr(n.outputs)})`:""}`:"event"===n.type?`event ${n.name}(${dr(n.inputs)})`:"error"===n.type?`error ${n.name}(${dr(n.inputs)})`:"constructor"===n.type?`constructor(${dr(n.inputs)})${"payable"===n.stateMutability?" payable":""}`:"fallback"===n.type?"fallback() external"+("payable"===n.stateMutability?" payable":""):"receive() external payable")));var t,n}const hr=e=>wt(lr(e),0,4),fr=lr;function pr(e){const{abi:t,args:n=[],name:r}=e,o=W(r,{strict:!1}),s=t.filter(e=>o?"function"===e.type?hr(e)===r:"event"===e.type&&fr(e)===r:"name"in e&&e.name===r);if(0===s.length)return;if(1===s.length)return s[0];let i;for(const e of s){if(!("inputs"in e))continue;if(!n||0===n.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==n.length)continue;const t=n.every((t,n)=>{const r="inputs"in e&&e.inputs[n];return!!r&&mr(t,r)});if(t){if(i&&"inputs"in i&&i.inputs){const t=gr(e.inputs,i.inputs,n);if(t)throw new lt({abiItem:e,type:t[0]},{abiItem:i,type:t[1]})}i=e}}return i||s[0]}function mr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return We(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===r&&"components"in t?Object.values(t.components).every((t,r)=>"object"===n&&mr(Object.values(e)[r],t)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)&&Array.isArray(e)&&e.every(e=>mr(e,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")}))}}function gr(e,t,n){for(const r in e){const o=e[r],s=t[r];if("tuple"===o.type&&"tuple"===s.type&&"components"in o&&"components"in s)return gr(o.components,s.components,n[r]);const i=[o.type,s.type];if((()=>!(!i.includes("address")||!i.includes("bytes20"))||(i.includes("address")&&i.includes("string")||!(!i.includes("address")||!i.includes("bytes")))&&We(n[r],{strict:!1}))())return i}}const yr="/docs/contract/encodeFunctionData";function br(e){const{args:t}=e,{abi:n,functionName:r}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:r}=e;let o=t[0];if(r){const e=pr({abi:t,args:n,name:r});if(!e)throw new dt(r,{docsPath:yr});o=e}if("function"!==o.type)throw new dt(void 0,{docsPath:yr});return{abi:[o],functionName:hr(et(o))}}(e),o=n[0];return bt([r,("inputs"in o&&o.inputs?Tt(o.inputs,t??[]):void 0)??"0x"])}const wr="0x5792579257925792579257925792579257925792579257925792579257925792",vr=ue(0,{size:32});async function xr(e,t){const{account:n=e.account,chain:o=e.chain,experimental_fallback:s,experimental_fallbackDelay:i=32,forceAtomic:a=!1,id:c,version:u="2.0.0"}=t,d=n?r(n):null;let l=t.capabilities;e.dataSuffix&&!t.capabilities?.dataSuffix&&(l="string"==typeof e.dataSuffix?{...t.capabilities,dataSuffix:{value:e.dataSuffix,optional:!0}}:{...t.capabilities,dataSuffix:{value:e.dataSuffix.value,...e.dataSuffix.required?{}:{optional:!0}}});const h=t.calls.map(e=>{const t=e,n=t.abi?br({abi:t.abi,functionName:t.functionName,args:t.args}):t.data;return{data:t.dataSuffix&&n?yt([n,t.dataSuffix]):n,to:t.to,value:t.value?ue(t.value):void 0}});try{const t=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:h,capabilities:l,chainId:ue(o.id),from:d?.address,id:c,version:u}]},{retryCount:0});return"string"==typeof t?{id:t}:t}catch(n){const r=n;if(s&&("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name||"UnknownRpcError"===r.name||r.details.toLowerCase().includes("does not exist / is not available")||r.details.toLowerCase().includes("missing or invalid. request()")||r.details.toLowerCase().includes("did not match any variant of untagged enum")||r.details.toLowerCase().includes("account upgraded to unsupported contract")||r.details.toLowerCase().includes("eip-7702 not supported")||r.details.toLowerCase().includes("unsupported wc_ method")||r.details.toLowerCase().includes("feature toggled misconfigured")||r.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(l&&Object.values(l).some(e=>!e.optional)){const e="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new er(new p(e,{details:e}))}if(a&&h.length>1){const e="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new ir(new p(e,{details:e}))}const t=[];for(const n of h){const r=Tn(e,{account:d,chain:o,data:n.data,to:n.to,value:n.value?Y(n.value):void 0});t.push(r),i>0&&await new Promise(e=>setTimeout(e,i))}const n=await Promise.allSettled(t);if(n.every(e=>"rejected"===e.status))throw n[0].reason;return{id:yt([...n.map(e=>"fulfilled"===e.status?e.value:vr),ue(o.id,{size:32}),wr])}}throw U(n,{...t,account:d,chain:t.chain})}}async function Pr(e,t){const{atomic:n=!1,chainId:r,receipts:o,version:s="2.0.0",...i}=await async function(t){if(t.endsWith(wr.slice(2))){const n=Fn(Et(t,-64,-32)),r=Et(t,0,-64).slice(2).match(/.{1,64}/g),o=await Promise.all(r.map(t=>vr.slice(2)!==t?e.request({method:"eth_getTransactionReceipt",params:[`0x${t}`]},{dedupe:!0}):void 0)),s=o.some(e=>null===e)?100:o.every(e=>"0x1"===e?.status)?200:o.every(e=>"0x0"===e?.status)?500:600;return{atomic:!1,chainId:J(n),receipts:o.filter(Boolean),status:s,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[t]})}(t.id),[a,c]=(()=>{const e=i.status;return e>=100&&e<200?["pending",e]:e>=200&&e<300?["success",e]:e>=300&&e<700?["failure",e]:"CONFIRMED"===e?["success",200]:"PENDING"===e?["pending",100]:[void 0,e]})();return{...i,atomic:n,chainId:r?J(r):void 0,receipts:o?.map(e=>({...e,blockNumber:Y(e.blockNumber),gasUsed:Y(e.gasUsed),status:An[e.status]}))??[],statusCode:c,status:a,version:s}}async function Er(e,t){const{account:n=e.account,chainId:o,nonce:s}=t;if(!n)throw new Ot({docsPath:"/docs/eip7702/prepareAuthorization"});const i=r(n),a=(()=>{if(t.executor)return"self"===t.executor?t.executor:r(t.executor)})(),c={address:t.contractAddress??t.address,chainId:o,nonce:s};return void 0===c.chainId&&(c.chainId=e.chain?.id??await pe(e,Xe,"getChainId")({})),void 0===c.nonce&&(c.nonce=await pe(e,rn,"getTransactionCount")({address:i.address,blockTag:"pending"}),("self"===a||a?.address&&function(e,t){if(!We(e,{strict:!1}))throw new ge({address:e});if(!We(t,{strict:!1}))throw new ge({address:t});return e.toLowerCase()===t.toLowerCase()}(a.address,i.address))&&(c.nonce+=1)),c}class Ir extends p{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}const Br=new Map,Tr=new Map;let Fr=0;function Ar(e,t,n){const r=++Fr,o=()=>Br.get(e)||[],s=()=>{const t=o();if(!t.some(e=>e.id===r))return;const n=Tr.get(e);if(1===t.length&&n){const e=n();e instanceof Promise&&e.catch(()=>{})}(()=>{const t=o();Br.set(e,t.filter(e=>e.id!==r))})()},i=o();if(Br.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return s;const a={};for(const e in t)a[e]=(...t)=>{const n=o();if(0!==n.length)for(const r of n)r.fns[e]?.(...t)};const c=n(a);return"function"==typeof c&&Tr.set(e,c),s}async function $r(e){return new Promise(t=>setTimeout(t,e))}function zr(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let o=!0;const s=()=>o=!1;return(async()=>{let i;t&&(i=await e({unpoll:s}));const a=await(n?.(i))??r;await $r(a);const c=async()=>{o&&(await e({unpoll:s}),await $r(r),c())};c()})(),s}function Or(){let e=()=>{},t=()=>{};return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function kr(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((o,s)=>{const i=async({count:a=0}={})=>{try{const t=await e();o(t)}catch(e){if(a<n&&await r({count:a,error:e}))return(async({error:e})=>{const n="function"==typeof t?t({count:a,error:e}):t;n&&await $r(n),i({count:a+1})})({error:e});s(e)}};i()})}async function Nr(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:o=({statusCode:e})=>200===e||e>=300,retryCount:s=4,retryDelay:i=({count:e})=>200*(1<<e),timeout:a=6e4,throwOnFailure:c=!1}=t,u=zn(["waitForCallsStatus",e.uid,n]),{promise:d,resolve:l,reject:h}=Or();let f;const p=Ar(u,{resolve:l,reject:h},t=>{const a=zr(async()=>{const r=e=>{clearTimeout(f),a(),e(),p()};try{const a=await kr(async()=>{const t=await pe(e,Pr,"getCallsStatus")({id:n});if(c&&"failure"===t.status)throw new Ir(t);return t},{retryCount:s,delay:i});if(!o(a))return;r(()=>t.resolve(a))}catch(e){r(()=>t.reject(e))}},{interval:r,emitOnBegin:!0});return a});return f=a?setTimeout(()=>{p(),clearTimeout(f),h(new Sr({id:n}))},a):void 0,await d}class Sr extends p{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Rr(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){const o=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,ue(r)]:[t]},{retryCount:0}),s=(e.chain?.formatters?.transactionReceipt?.format||$n)(o);if("reverted"===s.status&&n)throw new j({receipt:s});return s}async function Cr(e,{blockHash:t,blockNumber:n,blockTag:r,hash:o,index:s,sender:i,nonce:a}){const c=r||"latest",u=void 0!==n?ue(n):void 0;let d=null;if(o?d=await e.request({method:"eth_getTransactionByHash",params:[o]},{dedupe:!0}):t?d=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,ue(s)]},{dedupe:!0}):(u||c)&&"number"==typeof s?d=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||c,ue(s)]},{dedupe:Boolean(u)}):i&&"number"==typeof a&&(d=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[i,ue(a)]},{dedupe:!0})),!d)throw new G({blockHash:t,blockNumber:n,blockTag:c,hash:o,index:s});return(e.chain?.formatters?.transaction?.format||Q)(d,"getTransaction")}async function Gr(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new M({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||$n)(n,"getTransactionReceipt")}const Mr=new Map,jr=new Map;async function Lr(e,{cacheTime:t=e.cacheTime}={}){const n=await async function(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,Mr),r=t(e,jr);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}(t),o=r.response.get();if(o&&n>0&&Date.now()-o.created.getTime()<n)return o.data;let s=r.promise.get();s||(s=e(),r.promise.set(s));try{const e=await s;return r.response.set({created:new Date,data:e}),e}finally{r.promise.clear()}}(()=>e.request({method:"eth_blockNumber"}),{cacheKey:(r=e.uid,`blockNumber.${r}`),cacheTime:t});var r;return BigInt(n)}function qr(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:o,poll:s,pollingInterval:i=e.pollingInterval}){let a;return(void 0!==s?s:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type))?Ar(zn(["watchBlockNumber",e.uid,t,n,i]),{onBlockNumber:r,onError:o},r=>zr(async()=>{try{const t=await pe(e,Lr,"getBlockNumber")({cacheTime:0});if(void 0!==a){if(t===a)return;if(t-a>1&&n)for(let e=a+1n;e<t;e++)r.onBlockNumber(e,a),a=e}(void 0===a||t>a)&&(r.onBlockNumber(t,a),a=t)}catch(e){r.onError?.(e)}},{emitOnBegin:t,interval:i})):Ar(zn(["watchBlockNumber",e.uid,t,n]),{onBlockNumber:r,onError:o},t=>{let n=!0,r=()=>n=!1;return(async()=>{try{const o=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:s}=await o.subscribe({params:["newHeads"],onData(e){if(!n)return;const r=Y(e.result?.number);t.onBlockNumber(r,a),a=r},onError(e){t.onError?.(e)}});r=s,n||r()}catch(e){o?.(e)}})(),()=>r()})}async function Ur(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:o,onReplaced:s,retryCount:i=6,retryDelay:a=({count:e})=>200*(1<<e),timeout:c=18e4}=t,u=zn(["waitForTransactionReceipt",e.uid,o]),d=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let l,h,f,p,m,g=!1;const{promise:y,resolve:b,reject:w}=Or(),v=c?setTimeout(()=>{m?.(),p?.(),w(new L({hash:o}))},c):void 0;return p=Ar(u,{onReplaced:s,resolve:b,reject:w},async t=>{if(f=await pe(e,Gr,"getTransactionReceipt")({hash:o}).catch(()=>{}),f&&r<=1)return clearTimeout(v),t.resolve(f),void p?.();m=pe(e,qr,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:d,async onBlockNumber(s){const c=e=>{clearTimeout(v),m?.(),e(),p?.()};let u=s;if(!g)try{if(f){if(r>1&&(!f.blockNumber||u-f.blockNumber+1n<r))return;return void c(()=>t.resolve(f))}if(n&&!l&&(g=!0,await kr(async()=>{l=await pe(e,Cr,"getTransaction")({hash:o}),l.blockNumber&&(u=l.blockNumber)},{delay:a,retryCount:i}),g=!1),f=await pe(e,Gr,"getTransactionReceipt")({hash:o}),r>1&&(!f.blockNumber||u-f.blockNumber+1n<r))return;c(()=>t.resolve(f))}catch(n){if(n instanceof G||n instanceof M){if(!l)return void(g=!1);try{h=l,g=!0;const n=await kr(()=>pe(e,Je,"getBlock")({blockNumber:u,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:e})=>e instanceof Ze});g=!1;const o=n.transactions.find(({from:e,nonce:t})=>e===h.from&&t===h.nonce);if(!o)return;if(f=await pe(e,Gr,"getTransactionReceipt")({hash:o.hash}),r>1&&(!f.blockNumber||u-f.blockNumber+1n<r))return;let s="replaced";o.to===h.to&&o.value===h.value&&o.input===h.input?s="repriced":o.from===o.to&&0n===o.value&&(s="cancelled"),c(()=>{t.onReplaced?.({reason:s,replacedTransaction:h,transaction:o,transactionReceipt:f}),t.resolve(f)})}catch(e){c(()=>t.reject(e))}}else c(()=>t.reject(n))}}})}),y}const Hr=new ye(128);async function Dr(e,t){const{account:n=e.account,assertChainId:o=!0,chain:s=e.chain,accessList:i,authorizationList:a,blobs:c,data:u,dataSuffix:d=("string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value),gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,pollingInterval:b,throwOnReceiptRevert:w,type:v,value:x,...P}=t,E=t.timeout??Math.max(3*(s?.blockTime??0),5e3);if(void 0===n)throw new Ot({docsPath:"/docs/actions/wallet/sendTransactionSync"});const I=n?r(n):null;try{Ke(t);const n=await(async()=>t.to?t.to:null!==t.to&&a&&a.length>0?await Dt({authorization:a[0]}).catch(()=>{throw new p("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if("json-rpc"===I?.type||null===I){let t;null!==s&&(t=await pe(e,Xe,"getChainId")({}),o&&Kt({currentChainId:t,chain:s}));const r=e.chain?.formatters?.transactionRequest?.format,p=(r||fe)({...H(P,{format:r}),accessList:i,account:I,authorizationList:a,blobs:c,chainId:t,data:u?yt([u,d??"0x"]):u,gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,to:n,type:v,value:x},"sendTransaction"),B=Hr.get(e.uid),T=B?"wallet_sendTransaction":"eth_sendTransaction",F=await(async()=>{try{return await e.request({method:T,params:[p]},{retryCount:0})}catch(t){if(!1===B)throw t;const n=t;if("InvalidInputRpcError"===n.name||"InvalidParamsRpcError"===n.name||"MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)return await e.request({method:"wallet_sendTransaction",params:[p]},{retryCount:0}).then(t=>(Hr.set(e.uid,!0),t)).catch(t=>{const r=t;if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw Hr.set(e.uid,!1),n;throw r});throw n}})(),A=await pe(e,Ur,"waitForTransactionReceipt")({checkReplacement:!1,hash:F,pollingInterval:b,timeout:E});if(w&&"reverted"===A.status)throw new j({receipt:A});return A}if("local"===I?.type){const r=await pe(e,En,"prepareTransactionRequest")({account:I,accessList:i,authorizationList:a,blobs:c,chain:s,data:u?yt([u,d??"0x"]):u,gas:l,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,nonceManager:I.nonceManager,parameters:[...vn,"sidecars"],type:v,value:x,...P,to:n}),o=s?.serializers?.transaction,p=await I.signTransaction(r,{serializer:o});return await pe(e,Rr,"sendRawTransactionSync")({serializedTransaction:p,throwOnReceiptRevert:w,timeout:t.timeout})}if("smart"===I?.type)throw new kt({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new kt({docsPath:"/docs/actions/wallet/sendTransactionSync",type:I?.type})}catch(e){if(e instanceof kt)throw e;throw U(e,{...t,account:I,chain:t.chain||void 0})}}class _r extends p{constructor({domain:e}){super(`Invalid domain "${zn(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Vr extends p{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Wr extends p{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Kr(e){const{domain:t,message:n,primaryType:r,types:o}=e,s=(e,t)=>{for(const n of e){const{name:e,type:r}=n,i=t[e],a=r.match(Bt);if(a&&("number"==typeof i||"bigint"==typeof i)){const[e,t,n]=a;ue(i,{signed:"int"===t,size:Number.parseInt(n,10)/8})}if("address"===r&&"string"==typeof i&&!We(i))throw new ge({address:i});const c=r.match(It);if(c){const[e,t]=c;if(t&&K(i)!==Number.parseInt(t,10))throw new ht({expectedSize:Number.parseInt(t,10),givenSize:K(i)})}const u=o[r];u&&(Yr(r),s(u,i))}};if(o.EIP712Domain&&t){if("object"!=typeof t)throw new _r({domain:t});s(o.EIP712Domain,t)}if("EIP712Domain"!==r){if(!o[r])throw new Vr({primaryType:r,types:o});s(o[r],n)}}function Zr({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Yr(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Wr({type:e})}const Jr={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Xr={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Qr={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function eo(e,t={}){return void 0!==t.size&&Z(e,{size:t.size}),Y(ce(e,t),t)}function to(e,t={}){let n=e;if(void 0!==t.size&&(Z(n,{size:t.size}),n=Fn(n)),n.length>1||n[0]>1)throw new _(n);return Boolean(n[0])}function no(e,t={}){return void 0!==t.size&&Z(e,{size:t.size}),J(ce(e,t),t)}function ro(e,t){const n="string"==typeof t?Pe(t):t,r=jt(n);if(0===K(n)&&e.length>0)throw new st;if(K(t)&&K(t)<32)throw new ot({data:"string"==typeof t?t:ce(t),params:e,size:K(t)});let o=0;const s=[];for(let t=0;t<e.length;++t){const n=e[t];r.setPosition(o);const[i,a]=oo(r,n,{staticPosition:0});o+=a,s.push(i)}return s}function oo(e,t,{staticPosition:n}){const r=$t(t.type);if(r){const[o,s]=r;return function(e,t,{length:n,staticPosition:r}){if(!n){const n=r+no(e.readBytes(io)),o=n+so;e.setPosition(n);const s=no(e.readBytes(so)),i=ao(t);let a=0;const c=[];for(let n=0;n<s;++n){e.setPosition(o+(i?32*n:a));const[r,s]=oo(e,t,{staticPosition:o});a+=s,c.push(r)}return e.setPosition(r+32),[c,32]}if(ao(t)){const o=r+no(e.readBytes(io)),s=[];for(let r=0;r<n;++r){e.setPosition(o+32*r);const[n]=oo(e,t,{staticPosition:o});s.push(n)}return e.setPosition(r+32),[s,32]}let o=0;const s=[];for(let i=0;i<n;++i){const[n,i]=oo(e,t,{staticPosition:r+o});o+=i,s.push(n)}return[s,o]}(e,{...t,type:s},{length:o,staticPosition:n})}if("tuple"===t.type)return function(e,t,{staticPosition:n}){const r=0===t.components.length||t.components.some(({name:e})=>!e),o=r?[]:{};let s=0;if(ao(t)){const i=n+no(e.readBytes(io));for(let n=0;n<t.components.length;++n){const a=t.components[n];e.setPosition(i+s);const[c,u]=oo(e,a,{staticPosition:i});s+=u,o[r?n:a?.name]=c}return e.setPosition(n+32),[o,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=oo(e,a,{staticPosition:n});o[r?i:a?.name]=c,s+=u}return[o,s]}(e,t,{staticPosition:n});if("address"===t.type)return function(e){return[De(ce(Pt(e.readBytes(32),-20))),32]}(e);if("bool"===t.type)return function(e){return[to(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:n}){const[r,o]=t.type.split("bytes");if(!o){const t=no(e.readBytes(32));e.setPosition(n+t);const r=no(e.readBytes(32));if(0===r)return e.setPosition(n+32),["0x",32];const o=e.readBytes(r);return e.setPosition(n+32),[ce(o),32]}return[ce(e.readBytes(Number.parseInt(o,10),32)),32]}(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),o=e.readBytes(32);return[r>48?eo(o,{signed:n}):no(o,{signed:n}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const n=t+no(e.readBytes(32));e.setPosition(n);const r=no(e.readBytes(32));if(0===r)return e.setPosition(t+32),["",32];const o=function(e,t={}){let n=e;return void 0!==t.size&&(Z(n,{size:t.size}),n=Fn(n,{dir:"right"})),(new TextDecoder).decode(n)}(Fn(e.readBytes(r,32)));return e.setPosition(t+32),[o,32]}(e,{staticPosition:n});throw new pt(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const so=32,io=32;function ao(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(ao);const n=$t(e.type);return!(!n||!ao({...e,type:n[1]}))}function co({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((e,n)=>`${r&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?zn(t[n]):t[n]}`).join(", ")})`}class uo extends p{constructor(e,{abi:t,args:n,contractAddress:r,docsPath:o,functionName:s,sender:i}){const a=pr({abi:t,args:n,name:s}),c=a?co({abiItem:a,args:n,includeFunctionName:!1,includeName:!1}):void 0,u=k({address:r&&r,function:a?et(a,{includeName:!0}):void 0,args:c&&"()"!==c&&`${[...Array(s?.length??0).keys()].map(()=>" ").join("")}${c}`,sender:i});super(e.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],u&&"Contract Call:",u].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=r,this.functionName=s,this.sender=i}}class lo extends p{constructor({abi:e,data:t,functionName:n,message:r}){let o,s,i,a,c;if(t&&"0x"!==t)try{s=function(e){const{abi:t,data:n}=e,r=wt(n,0,4);if("0x"===r)throw new st;const o=[...t||[],Xr,Qr].find(e=>"error"===e.type&&r===hr(et(e)));if(!o)throw new ut(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?ro(o.inputs,wt(n,4)):void 0,errorName:o.name}}({abi:e,data:t});const{abiItem:n,errorName:r,args:o}=s;if("Error"===r)a=o[0];else if("Panic"===r){const[e]=o;a=Jr[e]}else{const e=n?et(n,{includeName:!0}):void 0,t=n&&o?co({abiItem:n,args:o,includeFunctionName:!1,includeName:!1}):void 0;i=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(r?.length??0).keys()].map(()=>" ").join("")}${t}`:""]}}catch(e){o=e}else r&&(a=r);o instanceof ut&&(c=o.signature,i=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://4byte.sourcify.dev/?q=${c}.`]),super(a&&"execution reverted"!==a||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,a||c].join("\n"):`The contract function "${n}" reverted.`,{cause:o,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s,this.raw=t,this.reason=a,this.signature=c}}class ho extends p{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class fo extends p{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const po=3;async function mo(e,t){return mo.internal(e,Tn,"sendTransaction",t)}function go(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:r,nativeCurrency:o,rpcUrls:s,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:ue(n),chainName:r,nativeCurrency:o,rpcUrls:s.default.http,blockExplorerUrls:i?Object.values(i).map(({url:e})=>e):void 0}]},{dedupe:!0,retryCount:0})}(e,t),deployContract:t=>function(e,t){const{abi:n,args:r,bytecode:o,...s}=t,i=function(e){const{abi:t,args:n,bytecode:r}=e;if(!n||0===n.length)return r;const o=t.find(e=>"type"in e&&"constructor"===e.type);if(!o)throw new nt({docsPath:zt});if(!("inputs"in o))throw new rt({docsPath:zt});if(!o.inputs||0===o.inputs.length)throw new rt({docsPath:zt});return bt([r,Tt(o.inputs,n)])}({abi:n,args:r,bytecode:o});return Tn(e,{...s,...s.authorizationList?{to:null}:{},data:i})}(e,t),fillTransaction:t=>Qe(e,t),getAddresses:()=>async function(e){return"local"===e.account?.type?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(e=>De(e))}(e),getCallsStatus:t=>Pr(e,t),getCapabilities:t=>async function(e,t={}){const{account:n=e.account,chainId:o}=t,s=n?r(n):void 0,i=o?[s?.address,[ue(o)]]:[s?.address],a=await e.request({method:"wallet_getCapabilities",params:i}),c={};for(const[e,t]of Object.entries(a)){c[Number(e)]={};for(let[n,r]of Object.entries(t))"addSubAccount"===n&&(n="unstable_addSubAccount"),c[Number(e)][n]=r}return"number"==typeof o?c[o]:c}(e,t),getChainId:()=>Xe(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}(e),prepareAuthorization:t=>Er(e,t),prepareTransactionRequest:t=>En(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(e=>function(e){if(!We(e,{strict:!1}))throw new ge({address:e});return De(e,void 0)}(e))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}(e,t),sendCalls:t=>xr(e,t),sendCallsSync:t=>async function(e,t){const{chain:n=e.chain}=t,r=t.timeout??Math.max(3*(n?.blockTime??0),5e3),o=await xr(e,t);return await Nr(e,{...t,id:o.id,timeout:r})}(e,t),sendRawTransaction:t=>In(e,t),sendRawTransactionSync:t=>Rr(e,t),sendTransaction:t=>Tn(e,t),sendTransactionSync:t=>Dr(e,t),showCallsStatus:t=>async function(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}(e,t),signAuthorization:t=>async function(e,t){const{account:n=e.account}=t;if(!n)throw new Ot({docsPath:"/docs/eip7702/signAuthorization"});const o=r(n);if(!o.signAuthorization)throw new kt({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:o.type});const s=await Er(e,t);return o.signAuthorization(s)}(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new Ot({docsPath:"/docs/actions/wallet/signMessage"});const o=r(t);if(o.signMessage)return o.signMessage({message:n});const s="string"==typeof n?le(n):n.raw instanceof Uint8Array?ie(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,o.address]},{retryCount:0})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:o=e.chain,...s}=t;if(!n)throw new Ot({docsPath:"/docs/actions/wallet/signTransaction"});const i=r(n);Ke({account:i,...t});const a=await pe(e,Xe,"getChainId")({});null!==o&&Kt({currentChainId:a,chain:o});const c=o?.formatters||e.chain?.formatters,u=c?.transactionRequest?.format||fe;return i.signTransaction?i.signTransaction({...s,chainId:a},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u({...s,account:i},"signTransaction"),chainId:ue(a),from:i.address}]},{retryCount:0})}(e,t),signTypedData:t=>async function(e,t){const{account:n=e.account,domain:o,message:s,primaryType:i}=t;if(!n)throw new Ot({docsPath:"/docs/actions/wallet/signTypedData"});const a=r(n),c={EIP712Domain:Zr({domain:o}),...t.types};if(Kr({domain:o,message:s,primaryType:i,types:c}),a.signTypedData)return a.signTypedData({domain:o,message:s,primaryType:i,types:c});const u=function(e){const{domain:t,message:n,primaryType:r,types:o}=e,s=(e,t)=>{const n={...t};for(const t of e){const{name:e,type:r}=t;"address"===r&&(n[e]=n[e].toLowerCase())}return n},i=o.EIP712Domain&&t?s(o.EIP712Domain,t):{},a=(()=>{if("EIP712Domain"!==r)return s(o[r],n)})();return zn({domain:i,message:a,primaryType:r,types:o})}({domain:o,message:s,primaryType:i,types:c});return e.request({method:"eth_signTypedData_v4",params:[a.address,u]},{retryCount:0})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:ue(t)}]},{retryCount:0})}(e,t),waitForCallsStatus:t=>Nr(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}(e,t),writeContract:t=>mo(e,t),writeContractSync:t=>async function(e,t){return mo.internal(e,Dr,"sendTransactionSync",t)}(e,t)}}!function(e){e.internal=async function(e,t,n,o){const{abi:s,account:i=e.account,address:a,args:c,functionName:u,...d}=o;if(void 0===i)throw new Ot({docsPath:"/docs/contract/writeContract"});const l=i?r(i):null,h=br({abi:s,args:c,functionName:u});try{return await pe(e,t,n)({data:h,to:a,account:l,...d})}catch(e){throw function(e,{abi:t,address:n,args:r,docsPath:o,functionName:s,sender:i}){const a=e instanceof fo?e:e instanceof p?e.walk(e=>"data"in e)||e.walk():{},{code:c,data:u,details:d,message:l,shortMessage:h}=a,f=e instanceof st?new ho({functionName:s}):[po,Ln.code].includes(c)&&(u||d||l||h)||c===qn.code&&"execution reverted"===d&&u?new lo({abi:t,data:"object"==typeof u?u.data:u,functionName:s,message:a instanceof kn?d:h??l}):e;return new uo(f,{abi:t,args:r,contractAddress:n,docsPath:o,functionName:s,sender:i})}(e,{abi:s,address:a,args:c,docsPath:"/docs/contract/writeContract",functionName:u,sender:l?.address})}}}(mo||(mo={}));class yo extends p{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}const bo=new Map;function wo(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const vo=wo();const xo=new ye(8192);function Po(e,t={}){return async(n,r={})=>{const{dedupe:o=!1,methods:s,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...r},{method:u}=n;if(s?.exclude?.includes(u))throw new _n(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new _n(new Error("method not supported"),{method:u});return function(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(xo.get(n))return xo.get(n);const r=e().finally(()=>xo.delete(n));return xo.set(n,r),r}(()=>kr(async()=>{try{return await e(n)}catch(e){const t=e;switch(t.code){case Cn.code:throw new Cn(t);case Gn.code:throw new Gn(t);case Mn.code:throw new Mn(t,{method:n.method});case jn.code:throw new jn(t);case Ln.code:throw new Ln(t);case qn.code:throw new qn(t);case Un.code:throw new Un(t);case Hn.code:throw new Hn(t);case Dn.code:throw new Dn(t);case _n.code:throw new _n(t,{method:n.method});case Vn.code:throw new Vn(t);case Wn.code:throw new Wn(t);case Kn.code:throw new Kn(t);case Zn.code:throw new Zn(t);case Yn.code:throw new Yn(t);case Jn.code:throw new Jn(t);case Xn.code:throw new Xn(t);case Qn.code:throw new Qn(t);case er.code:throw new er(t);case tr.code:throw new tr(t);case nr.code:throw new nr(t);case rr.code:throw new rr(t);case or.code:throw new or(t);case sr.code:throw new sr(t);case ir.code:throw new ir(t);case 5e3:throw new Kn(t);default:if(e instanceof p)throw e;throw new ar(t)}}},{delay:({count:e,error:t})=>{if(t&&t instanceof On){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e,10)}return(1<<e)*i},retryCount:a,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===Vn.code||e.code===Ln.code:!(e instanceof On&&e.status)||(403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status)}(e)}),{enabled:o,id:o?le(`${c}.${zn(n)}`):void 0})}}function Eo(e,t={}){const{batch:n,fetchFn:r,fetchOptions:o,key:s="http",methods:a,name:c="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:d,retryDelay:l,raw:h}=t;return({chain:f,retryCount:p,timeout:m})=>{const{batchSize:g=1e3,wait:y=0}="object"==typeof n?n:{},b=t.retryCount??p,w=m??t.timeout??1e4,v=e||f?.rpcUrls.default.http[0];if(!v)throw new yo;const x=function(e,t={}){const{url:n,headers:r}=function(e){try{const t=new URL(e),n=(()=>{if(t.username){const e=`${decodeURIComponent(t.username)}:${decodeURIComponent(t.password)}`;return t.username="",t.password="",{url:t.toString(),headers:{Authorization:`Basic ${btoa(e)}`}}}})();return{url:t.toString(),...n}}catch{return{url:e}}}(e);return{async request(e){const{body:o,fetchFn:s=t.fetchFn??fetch,onRequest:i=t.onRequest,onResponse:a=t.onResponse,timeout:c=t.timeout??1e4}=e,u={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:d,method:l,signal:h}=u;try{const e=await function(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((o,s)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r?a.abort():s(t)},n)),o(await e({signal:a?.signal||null}))}catch(e){"AbortError"===e?.name&&s(t),s(e)}finally{clearTimeout(i)}})()})}(async({signal:e})=>{const t={...u,body:Array.isArray(o)?zn(o.map(e=>({jsonrpc:"2.0",id:e.id??vo.take(),...e}))):zn({jsonrpc:"2.0",id:o.id??vo.take(),...o}),headers:{...r,"Content-Type":"application/json",...d},method:l||"POST",signal:h||(c>0?e:null)},a=new Request(n,t),f=await(i?.(a,t))??{...t,url:n};return await s(f.url??n,f)},{errorInstance:new Nn({body:o,url:n}),timeout:c,signal:!0});let t;if(a&&await a(e),e.headers.get("Content-Type")?.startsWith("application/json"))t=await e.json();else{t=await e.text();try{t=JSON.parse(t||"{}")}catch(n){if(e.ok)throw n;t={error:t}}}if(!e.ok)throw new On({body:o,details:zn(t.error)||e.statusText,headers:e.headers,status:e.status,url:n});return t}catch(e){if(e instanceof On)throw e;if(e instanceof Nn)throw e;throw new On({body:o,cause:e,url:n})}}}}(v,{fetchFn:r,fetchOptions:o,onRequest:u,onResponse:d,timeout:w});return function({key:e,methods:t,name:n,request:r,retryCount:o=3,retryDelay:s=150,timeout:a,type:c},u){return{config:{key:e,methods:t,name:n,request:r,retryCount:o,retryDelay:s,timeout:a,type:c},request:Po(r,{methods:t,retryCount:o,retryDelay:s,uid:i()}),value:u}}({key:s,methods:a,name:c,async request({method:e,params:t}){const r={method:e,params:t},{schedule:o}=function({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:o}){const s=async()=>{const t=a();i();const n=t.map(({args:e})=>e);0!==n.length&&e(n).then(e=>{o&&Array.isArray(e)&&e.sort(o);for(let n=0;n<t.length;n++){const{resolve:r}=t[n];r?.([e[n],e])}}).catch(e=>{for(let n=0;n<t.length;n++){const{reject:r}=t[n];r?.(e)}})},i=()=>bo.delete(t),a=()=>bo.get(t)||[],c=e=>bo.set(t,[...a(),e]);return{flush:i,async schedule(e){const{promise:t,resolve:o,reject:i}=Or(),u=n?.([...a().map(({args:e})=>e),e]);return u&&s(),a().length>0?(c({args:e,resolve:o,reject:i}),t):(c({args:e,resolve:o,reject:i}),setTimeout(s,r),t)}}}({id:v,wait:y,shouldSplitBatch:e=>e.length>g,fn:e=>x.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:s,result:i}]=await(async e=>n?o(e):[await x.request({body:e})])(r);if(h)return{error:s,result:i};if(s)throw new kn({body:r,error:s,url:v});return i},retryCount:b,retryDelay:l,timeout:w,type:"http"},{fetchOptions:o,url:v})}}class Io extends p{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}var Bo=n(677);let To=!1;async function Fo({hash:e,privateKey:t,to:n="object"}){const{r,s:o,recovery:s}=Bo.secp256k1.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:W(To,{strict:!1})?Pe(To):To}),i={r:ue(r,{size:32}),s:ue(o,{size:32}),v:s?28n:27n,yParity:s};return"bytes"===n||"hex"===n?function({r:e,s:t,to:n="hex",v:r,yParity:o}){const s=(()=>{if(0===o||1===o)return o;if(r&&(27n===r||28n===r||r>=35n))return r%2n==0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Bo.secp256k1.Signature(Y(e),Y(t)).toCompactHex()}${0===s?"1b":"1c"}`;return"hex"===n?i:Pe(i)}({...i,to:n}):i}function Ao(e,t){return Ue(function(e){const t="string"==typeof e?le(e):"string"==typeof e.raw?e.raw:ce(e.raw);return yt([le(`Ethereum Signed Message:\n${K(t)}`),t])}(e),t)}function $o(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:o}=e;if(t<=0)throw new Wt({chainId:t});if(o&&!We(o))throw new ge({address:o});if(r&&r>me)throw new v({maxFeePerGas:r});if(n&&r&&n>r)throw new $({maxFeePerGas:r,maxPriorityFeePerGas:n})}function zo(e){if(!e||0===e.length)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:o}=e[n];for(let e=0;e<o.length;e++)if(o[e].length-2!=64)throw new R({storageKey:o[e]});if(!We(r,{strict:!1}))throw new ge({address:r});t.push([r,o])}return t}function Oo(e,t){const n=wn(e);return"eip1559"===n?function(e,t){const{chainId:n,gas:r,nonce:o,to:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:d}=e;$o(e);const l=zo(u);return bt(["0x02",Lt([ue(n),o?ue(o):"0x",c?ue(c):"0x",a?ue(a):"0x",r?ue(r):"0x",s??"0x",i?ue(i):"0x",d??"0x",l,...ko(e,t)])])}(e,t):"eip2930"===n?function(e,t){const{chainId:n,gas:r,data:o,nonce:s,to:i,value:a,accessList:c,gasPrice:u}=e;!function(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:o,to:s}=e;if(t<=0)throw new Wt({chainId:t});if(s&&!We(s))throw new ge({address:s});if(n||o)throw new p("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>me)throw new v({maxFeePerGas:r})}(e);const d=zo(c);return bt(["0x01",Lt([ue(n),s?ue(s):"0x",u?ue(u):"0x",r?ue(r):"0x",i??"0x",a?ue(a):"0x",o??"0x",d,...ko(e,t)])])}(e,t):"eip4844"===n?function(e,t){const{chainId:n,gas:r,nonce:o,to:s,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:l}=e;!function(e){const{blobVersionedHashes:t}=e;if(t){if(0===t.length)throw new mn;for(const e of t){const t=K(e),n=J(wt(e,0,1));if(32!==t)throw new gn({hash:e,size:t});if(1!==n)throw new yn({hash:e,version:n})}}$o(e)}(e);let h=e.blobVersionedHashes,f=e.sidecars;if(e.blobs&&(void 0===h||void 0===f)){const t="string"==typeof e.blobs[0]?e.blobs:e.blobs.map(e=>ce(e)),n=e.kzg,r=on({blobs:t,kzg:n});void 0===h&&(h=un({commitments:r})),void 0===f&&(f=bn({blobs:t,commitments:r,proofs:sn({blobs:t,commitments:r,kzg:n})}))}const p=zo(d),m=[ue(n),o?ue(o):"0x",u?ue(u):"0x",c?ue(c):"0x",r?ue(r):"0x",s??"0x",i?ue(i):"0x",l??"0x",p,a?ue(a):"0x",h??[],...ko(e,t)],g=[],y=[],b=[];if(f)for(let e=0;e<f.length;e++){const{blob:t,commitment:n,proof:r}=f[e];g.push(t),y.push(n),b.push(r)}return bt(["0x03",Lt(f?[m,g,y,b]:m)])}(e,t):"eip7702"===n?function(e,t){const{authorizationList:n,chainId:r,gas:o,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:l}=e;!function(e){const{authorizationList:t}=e;if(t)for(const e of t){const{chainId:t}=e,n=e.address;if(!We(n))throw new ge({address:n});if(t<0)throw new Wt({chainId:t})}$o(e)}(e);const h=zo(d),f=function(e){if(!e||0===e.length)return[];const t=[];for(const n of e){const{chainId:e,nonce:r,...o}=n,s=n.address;t.push([e?ie(e):"0x",s,r?ie(r):"0x",...ko({},o)])}return t}(n);return bt(["0x04",Lt([ue(r),s?ue(s):"0x",u?ue(u):"0x",c?ue(c):"0x",o?ue(o):"0x",i??"0x",a?ue(a):"0x",l??"0x",h,f,...ko(e,t)])])}(e,t):function(e,t){const{chainId:n=0,gas:r,data:o,nonce:s,to:i,value:a,gasPrice:c}=e;!function(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:o,to:s}=e;if(s&&!We(s))throw new ge({address:s});if(void 0!==t&&t<=0)throw new Wt({chainId:t});if(n||o)throw new p("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>me)throw new v({maxFeePerGas:r})}(e);let u=[s?ue(s):"0x",c?ue(c):"0x",r?ue(r):"0x",i??"0x",a?ue(a):"0x",o??"0x"];if(t){const e=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(35n===t.v?0n:1n);if(n>0)return BigInt(2*n)+BigInt(35n+t.v-27n);const e=27n+(27n===t.v?0n:1n);if(t.v!==e)throw new N({v:t.v});return e})(),r=Fn(t.r),o=Fn(t.s);u=[...u,ue(e),"0x00"===r?"0x":r,"0x00"===o?"0x":o]}else n>0&&(u=[...u,ue(n),"0x","0x"]);return Lt(u)}(e,t)}function ko(e,t){const n=t??e,{v:r,yParity:o}=n;if(void 0===n.r)return[];if(void 0===n.s)return[];if(void 0===r&&void 0===o)return[];const s=Fn(n.r),i=Fn(n.s);return["number"==typeof o?o?ue(1):"0x":0n===r?"0x":1n===r?ue(1):27n===r?"0x":ue(1),"0x00"===s?"0x":s,"0x00"===i?"0x":i]}function No(e){const{domain:t={},message:n,primaryType:r}=e,o={EIP712Domain:Zr({domain:t}),...e.types};Kr({domain:t,message:n,primaryType:r,types:o});const s=["0x1901"];return t&&s.push(function({domain:e,types:t}){return So({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:o})),"EIP712Domain"!==r&&s.push(So({data:n,primaryType:r,types:o})),Ue(yt(s))}function So({data:e,primaryType:t,types:n}){return Ue(Ro({data:e,primaryType:t,types:n}))}function Ro({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],o=[Co({primaryType:t,types:n})];for(const s of n[t]){const[t,i]=Mo({types:n,name:s.name,type:s.type,value:e[s.name]});r.push(t),o.push(i)}return Tt(r,o)}function Co({primaryType:e,types:t}){const n=ie(function({primaryType:e,types:t}){let n="";const r=Go({primaryType:e,types:t});r.delete(e);const o=[e,...Array.from(r).sort()];for(const e of o)n+=`${e}(${t[e].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return n}({primaryType:e,types:t}));return Ue(n)}function Go({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),o=r?.[0];if(n.has(o)||void 0===t[o])return n;n.add(o);for(const e of t[o])Go({primaryType:e.type,types:t},n);return n}function Mo({types:e,name:t,type:n,value:r}){if(void 0!==e[n])return[{type:"bytes32"},Ue(Ro({data:r,primaryType:n,types:e}))];if("bytes"===n)return[{type:"bytes32"},Ue(r)];if("string"===n)return[{type:"bytes32"},Ue(ie(r))];if(n.lastIndexOf("]")===n.length-1){const o=n.slice(0,n.lastIndexOf("[")),s=r.map(n=>Mo({name:t,type:o,types:e,value:n}));return[{type:"bytes32"},Ue(Tt(s.map(([e])=>e),s.map(([,e])=>e)))]}return[{type:n},r]}const jo=function(){const e={formatters:void 0,fees:void 0,serializers:void 0,id:9746,name:"Plasma Testnet",network:"plasma-testnet",nativeCurrency:{name:"Plasma",symbol:"XPL",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.plasma.to"]},public:{http:["https://testnet-rpc.plasma.to"]}}};return Object.assign(e,{extend:function e(t){return n=>{const r="function"==typeof n?n(t):n,o={...t,...r};return Object.assign(o,{extend:e(o)})}}(e)})}(),Lo={ReceiveWithAuthorization:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"validAfter",type:"uint256"},{name:"validBefore",type:"uint256"},{name:"nonce",type:"bytes32"}]};window.bridge={ping:()=>"pong",signGaslessTransfer:async(e,t,n,o,s)=>{try{const a=function(e,t={}){const{nonceManager:n}=t,r=ie(Bo.secp256k1.getPublicKey(e.slice(2),!1)),o=function(e){if(!We(e.address,{strict:!1}))throw new ge({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:Nt(r),nonceManager:n,sign:async({hash:t})=>Fo({hash:t,privateKey:e,to:"hex"}),signAuthorization:async t=>async function(e){const{chainId:t,nonce:n,privateKey:r,to:o="object"}=e,s=e.contractAddress??e.address,i=await Fo({hash:Ht({address:s,chainId:t,nonce:n}),privateKey:r,to:o});return"object"===o?{address:s,chainId:t,nonce:n,...i}:i}({...t,privateKey:e}),signMessage:async({message:t})=>async function({message:e,privateKey:t}){return await Fo({hash:Ao(e),privateKey:t,to:"hex"})}({message:t,privateKey:e}),signTransaction:async(t,{serializer:n}={})=>async function(e){const{privateKey:t,transaction:n,serializer:r=Oo}=e,o="eip4844"===n.type?{...n,sidecars:!1}:n,s=await Fo({hash:Ue(await r(o)),privateKey:t});return await r(n,s)}({privateKey:e,transaction:t,serializer:n}),signTypedData:async t=>async function(e){const{privateKey:t,...n}=e;return await Fo({hash:No(n),privateKey:t,to:"hex"})}({...t,privateKey:e})});return{...o,publicKey:r,source:"privateKey"}}(e),c=function(e){const{key:t="wallet",name:n="Wallet Client",transport:o}=e,s=function(e){const{batch:t,chain:n,ccipRead:o,dataSuffix:s,key:a="base",name:c="Base Client",type:u="base"}=e,d=e.experimental_blockTag??("number"==typeof n?.experimental_preconfirmationTime?"pending":void 0),l=n?.blockTime??12e3,h=Math.min(Math.max(Math.floor(l/2),500),4e3),f=e.pollingInterval??h,p=e.cacheTime??f,m=e.account?r(e.account):void 0,{config:g,request:y,value:b}=e.transport({account:m,chain:n,pollingInterval:f}),w={account:m,batch:t,cacheTime:p,ccipRead:o,chain:n,dataSuffix:s,key:a,name:c,pollingInterval:f,request:y,transport:{...g,...b},type:u,uid:i(),...d?{experimental_blockTag:d}:{}};return Object.assign(w,{extend:function e(t){return n=>{const r=n(t);for(const e in w)delete r[e];const o={...t,...r};return Object.assign(o,{extend:e(o)})}}(w)})}({...e,key:t,name:n,transport:o,type:"walletClient"});return s.extend(go)}({account:a,chain:jo,transport:Eo()}),u=BigInt(0),d=BigInt(Math.floor(Date.now()/1e3)+3600),l=(()=>{if(!globalThis.crypto||"function"!=typeof globalThis.crypto.getRandomValues)throw new Error("Secure random generator unavailable in this WebView");const e=new Uint8Array(32);return globalThis.crypto.getRandomValues(e),"0x"+Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")})(),h=function(e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Io({value:e});let[t,n="0"]=e.split(".");const r=t.startsWith("-");if(r&&(t=t.slice(1)),n=n.replace(/(0+)$/,""),n.length>6){const[e,r,o]=[n.slice(0,5),n.slice(5,6),n.slice(6)],s=Math.round(Number(`${r}.${o}`));n=s>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${s}`,n.length>6&&(n=n.slice(1),t=`${BigInt(t)+1n}`),n=n.slice(0,6)}else n=n.padEnd(6,"0");return BigInt(`${r?"-":""}${t}${n}`)}(o),f=await c.signTypedData({account:a,domain:{name:"USD Token",version:"1",chainId:9746,verifyingContract:s},types:Lo,primaryType:"ReceiveWithAuthorization",message:{from:t,to:n,value:h,validAfter:u,validBefore:d,nonce:l}});return JSON.stringify({authorization:{from:t,to:n,value:h.toString(),validAfter:u.toString(),validBefore:d.toString(),nonce:l},signature:f})}catch(e){return"ERROR: "+e.message}}},console.log(" Offline Bridge Logic Loaded")})();